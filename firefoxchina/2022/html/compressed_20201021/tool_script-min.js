var CHANNEL_ID="unknown",DOMAIN_TOP=document.domain,NEW_EXTENSION=window.mozCNChannel?true:false;var CONFIG={TIME_OUT:10000,TIME_OUT_FETCH:20000,OVER_TIME:300,COOKIE:{DEFAULT_COOKIE_EXPIRE:new Date("December 31, 2100"),LOGIN_REDIRECT_COOKIE:"MOZ_H___forward__"},SCROLL:{SIDE_BAR_REFER_SELECTOR:".fixed-show",SIDE_BAR_FIXED_CLS:"side-flip",SIDE_BAR_ABSOLUTE_CLS:"side-absolute",MENU_FIXED_CLS:"menu-flip",MENU_ABSOLUTE_CLS:"menu-absolute",SCROLL_LOAD_INIT:"inited"},DELAY:{DELAY_MOD_CLS:"delay-mod",DELAY_LOADED_NAME:"loaded",DELAY_IMG_CLS:"img-load-delay",DELAY_IFRAME_CLS:"iframe-load-delay",DELAY_ATTR_NAME:"data-url"},TEXT:{NOT_LOGIN:"您还没有登录，请先登录! ",LINK_FORMAT_ERROR:"请输入正确的链接地址",SYSTEM_IS_BUSY:"系统繁忙，请稍候再试",SYSTEM_IS_BUSY_ELE:"<div class='errmsg'>系统繁忙，请稍候再试</div>",OPERATE_TOO_OFTEN:"操作太频繁了，休息~~休息一下~~",OPERATE_FAILED:"操作失败",NO_DATA_TEXT:"暂无数据！",NO_DATA_ELE:"<div class='errmsg'>暂无数据！</div>",NO_SEARCH_KEYWORDS:"   请输入搜索内容~~    ",CHECK_ATTR_DISABLED:"data-disabled",ATTR_DISABLED_TEXT:"disabled",IMAGE_SUFFIX_ERROR:"图片仅支持JPG、JPEG、PNG、GIF格式",AVATAR_SUFFIX_ERROR:"头像仅支持JPG、JPEG、PNG格式",IMAGE_TOO_LARGE_ERROR:"图片过大，仅支持<=500K的图片",IMAGE_TOO_LARGE_CHECK:"413 Request Entity Too Large",ALLOW_IMAGE_SUFFIX:["JPG","JPEG","PNG","GIF"],ALLOW_AVATAR_SUFFIX:["JPG","JPEG","PNG","GIF"]},LINK:{TRACE_IMG_URL:"https://home.firefoxchina.cn/2019/img/trace_2014.gif"},USER_CARD:{SELECTOR:".pop-user",TIME_OUT_DELAY:300,TIME_OVER_DELAY:500,WIDTH:264,HEIGHT:176,FETCH_USER_LINK:"User/UserCenter/getProfile"},BEHAVIOR:{UNFOLLOW_LINK:"User/follow/unfollow",FOLLOW_LINK:"User/follow/follow",FOLLOWED_TEXT:"取消关注",FOLLOW_TEXT:"+关 注",FOLLOWED_CLS:"followed",FOLLOW_CLS:"follow",ALREADY_FOLLOWED:"已关注",NO_FOLLOWING_ELE:"<div class='errmsg'>您还没有关注任何人哦！</div>",SUPPORTED_CLS:"supported",SUPPORT_ARTICLE_LINK:"Article/ArticleSupport/support",SUPPORT_COMMENT_LINK:"Article/ArticleReplySupport/support",ALREADY_SUPPORTED:"您已经赞过，不能再赞了。",FAVE_LINK:"Article/ArticleBookmark/addbookmark",FAVE_CANCEL_LINK:"Article/ArticleBookmark/delbookmark",FAVED_CLS:"faved",FAVE_CLS:"fave",FAVED_TEXT:"取消收藏",FAVE_TEXT:"收藏",FAVE_SUCCESS:"收藏成功！",FAVE_DEL_SUCCESS:"已取消收藏！",REPORT_ARTICLE_LINK:"article/article_accuse/doAccuse",REPORT_COMMENT_LINK:"article/article_reply_accuse/doReplyAccuse",ALREADY_REPORTED:"您已经举报过了！",USER_MARK_LINK:"User/Signin/signin",MESSAGE_CHECK_LINK:"User/Ihome/isHaveMessageNoRemind",MESSAGE_REMIND_CLS:"newmsg",MESSAGE_INTERVAL:2*60*1000},EMOTION:{FETCH_EMOTION_LINK:"Home/Index/getEmotion",MSG_FETCH_EMOTION_FAILE:"获取表情失败"},VERIFY:{EMAIL:/^([a-zA-Z0-9_\-\.])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/,FLOAT:/[^0-9.]/,LINK:/^(http[s]{0,1}|ftp):\/\//i,MOBILE:/^1[0-9]{10}$/,PHONE:/^((0\d{2,3})-)(\d{7,8})(-(\d{3,4}))?$/,ZIPCODE:/^[1-9][0-9]{5}$/}};(function(){var a={__backend__:{setItem:function(f,g,c,b){var d;if(c){d=new Date();d.setTime(c)}else{d=CONFIG.COOKIE.DEFAULT_COOKIE_EXPIRE}try{var i=b?g:escape(g+"");document.cookie=f+"="+i+"; path="+CONFIG_GLOBAL.COOKIE.PATH+"; domain="+CONFIG_GLOBAL.COOKIE.DOMAIN+"; expires="+d.toGMTString()}catch(h){}},getItem:function(g,c){var b=(c!=undefined?c:undefined);try{var d=document.cookie.split(";"),h=new RegExp("^ ?"+g+"="),f;for(f in d){if(h.test(d[f])){var k=d[f];b=unescape(k.substr(k.indexOf("=")+1))}}}catch(j){}return b}},getItem:function(c,f){var b=null;try{b=this.__backend__.getItem(c);if(b!==null){b=JSON.parse(b+"")||f}else{b=f}}catch(e){b=f}return b},setItem:function(e,d,c,b){try{this.__backend__.setItem(e,b?d:JSON.stringify(d),c,b)}catch(f){}}};if(!window.CookieWidget){window.CookieWidget=a}})();(function(){var b={__backend__:null,storeList:{},init:function(){var d=this;if(window.localStorage){try{d.__backend__=window.localStorage;d.__backend__.__type__="ls"}catch(f){c(MOZ_INFO.SECRET_MODE)}}else{if(window.globalStorage){try{d.__backend__=window.globalStorage;d.__backend__.__type__="gs"}catch(f){c(MOZ_INFO.SECRET_MODE)}}else{if(document.cookie){try{d.__backend__=CookieWidget.__backend__;d.__backend__.__type__="ck"}catch(f){c(MOZ_INFO.SECRET_MODE)}}else{this.backend={getItem:function(){return null},setItem:function(){},__type__:"dummy"}}}}},getItem:function(f,h){var e=null;try{e=this.__backend__.getItem(f);if(e!==null){e=JSON.parse(e+"")||h}else{e=h}}catch(g){e=h}return e},setItem:function(f,e,d){var h=this;try{h.__backend__.setItem(f,JSON.stringify(e));h.storeList[f]=1}catch(g){}},clear:function(){var d=this,e=d.storeList;var f=b.getItem("n_2014_s_version");if(f!=__version__){if(__clears__&&__clears__.length){$.each(__clears__,function(i,g){d.setItem(g,"")})}else{$.each(e,function(g,h){d.setItem(g,"")})}d.setItem("n_2014_s_version",__version__)}}};var a=$("#system-error");function c(d){d&&a.html(d).show()}b.init();if(!window.StorageWidget){window.StorageWidget=b}})();(function(){var a=(function(){var g=navigator.userAgent;var n=function(){};n.loadDelayResource=function(o){if(o&&o.length){$.each(o,function(q,r){var p=$(r);m(p)})}else{m(o)}};n.getByteLength=function(q){var o=0;if(q){var p=q.replace(/[^\x00-\xff]/g,"**");o=p.length}return o};n.getByteString=function(v,u){var r=$.trim(v);if(r){var q=0,s,o=0,p="",t=false;while((s=r.charAt(q))&&(o<u)&&!t){q++;if(/[^\x00-\xff]/.test(s)){if(o<=u-2){o=o+2;p=p+s}else{t=true}}else{p=p+s;o=o+1}}r=p}return r};n.getParam=function(o){var t=null,w=window.location.search;if(w){var u=w.substr(1),r=u.split("&"),p=0,s=r.length;for(;p<s;p++){var v=r[p],q=v.split("=");if(q.length){if(q[0]==o){return q[1]}}}}return t};n.getPath=function(o,q,p){return d(o,q,p)};n.getScrollPos=function(){return i()};n.getEleInfo=function(o){return f(o)};n.loadScrollResource=function(o){c(o)};n.checkEleDisabled=function(p){var o=false;p&&p.length&&(o=$.trim(p.attr(CONFIG.TEXT.CHECK_ATTR_DISABLED))?true:false);return o};n.setEleDisabled=function(q,o,r,p){if(q&&q.length&&o){switch(o){case 1:q.attr(CONFIG.TEXT.CHECK_ATTR_DISABLED,CONFIG.TEXT.ATTR_DISABLED_TEXT);if(r&&r.length){r.attr(CONFIG.TEXT.CHECK_ATTR_DISABLED,CONFIG.TEXT.ATTR_DISABLED_TEXT);r.attr("tx-ori",r.val());p&&r.val(p)}break;case -1:q.removeAttr(CONFIG.TEXT.CHECK_ATTR_DISABLED);if(r&&r.length){r.removeAttr(CONFIG.TEXT.CHECK_ATTR_DISABLED);var s=r.attr("tx-ori");s&&r.val(s)}break}}};n.loadScrollList=function(p,s){if(p&&p.length){if(p.attr(CONFIG.SCROLL.SCROLL_LOAD_INIT)){return}var o=a.getScrollPos().top,r=document.documentElement.clientHeight,q=p.get(0).getBoundingClientRect().top;if(q<=r+50){s&&s.call(null,p)}}};function c(p){var q=document.documentElement.clientHeight,o;if(p){o=$("."+CONFIG.DELAY.DELAY_IMG_CLS)}else{o=$("."+CONFIG.DELAY.DELAY_MOD_CLS)}$.each(o,function(s,v){var r=$(v),u=r.get(0).getBoundingClientRect().top,t=r.height();if((u>0&&u<(q+50))||(u<=0&&Math.abs(u)<t-50)){r&&r.length&&m(r,p)}})}function m(r,t){if(r&&r.length&&r.attr(CONFIG.DELAY.DELAY_LOADED_NAME)){return}var q=CONFIG.DELAY.DELAY_IMG_CLS,p=CONFIG.DELAY.DELAY_IFRAME_CLS,s=r?(t?r:r.find("."+q)):$("."+q),o=r?r.find("."+p):$("."+p);if(r&&r.length&&(!o.length&&!s.length)){r.attr(CONFIG.DELAY.DELAY_LOADED_NAME,CONFIG.DELAY.DELAY_LOADED_NAME);r.removeClass(CONFIG.DELAY.DELAY_MOD_CLS)}if(s.length){$.each(s,function(u,v){k($(v),q,true,t)})}if(o.length){$.each(o,function(v,u){k($(u),p)})}}function k(p,o,t){if(!p.length){return}var q=p.attr(CONFIG.DELAY.DELAY_ATTR_NAME);if(q){var s=false,r=false;p.attr("src",q);p.on("load",function(u){if(!r){s=true;p.removeClass(o);p.removeAttr(CONFIG.DELAY.DELAY_ATTR_NAME)}})}}function h(){return parseInt(CONFIG_GLOBAL.MID)}function l(q){if(q instanceof jQuery){q=q.get(0)}var p=0;if(document.selection){q.focus();var o=document.selection.createRange();o.moveStart("character",-q.value.length);p=o.text.length}else{if(q.selectionStart||q.selectionStart=="0"){p=q.selectionStart}}return(p)}function e(p,q){if(p instanceof jQuery){p=p.get(0)}if(p.setSelectionRange){p.focus();p.setSelectionRange(q,q)}else{if(p.createTextRange){var o=p.createTextRange();o.collapse(true);o.moveEnd("character",q);o.moveStart("character",q);o.select()}}}function b(s,v,t){var q=s.val(),o=q.length,u=q.substring(0,v),p=q.substring(v),r=u+t+p;s.val(r);e(s,v+t.length)}function j(q,p,y){if(!q){return}var v=$("#pop-msg-info");v.length&&v.remove();var w="",t="pop-msg-fixed";if(p&&p.length){var x=f(p),A=200,u=40,r=document.body.clientWidth,o=document.body.clientHeight,z=document.documentElement.clientHeight,B=document.body.scrollTop||document.documentElement.scrollTop;t="pop-msg";w="style='top:"+((z-u)/2+B)+"px; left:"+((r-A)/2)+"px;'"}var s="<div id='pop-msg-info' class='"+t+"' "+w+"><p>"+q+"</p></div>";$(document.body).append(s);v=$("#pop-msg-info");v.show().animate({opacity:1,"margin-top":"0px"},500,function(){var C=setTimeout(function(){v.animate({opacity:0},500,function(){v.hide();y&&y.call(null)})},2000)})}function f(q){if(!q||(q&&!q.length)){return null}var r=q.width(),p=q.height(),s=q.get(0).getBoundingClientRect(),o=i();return{width:r,height:p,scroll:o,client:s,pos:{top:(s.top+o.top),left:(s.left+o.left)}}}function i(){return{top:document.documentElement.scrollTop||document.body.scrollTop,left:document.documentElement.scrollLeft||document.body.scrollLeft}}function d(p,r,q){var o="";if(CONFIG_GLOBAL.SERVER.MODEL[0]==2){var o=CONFIG_GLOBAL.SERVER.ROOT+"/";p=p.split("/");if(p[0]==""||p[0]=="@"){p[0]=""}if(!p[1]){p[1]="Index"}if(!p[2]){p[2]="index"}o=o+""+p[0]+"/"+p[1]+"/"+p[2];if(r){r=r.join("/");o=o+"/"+r}if(!q){o=o+".html"}}else{var o=CONFIG_GLOBAL.SERVER.ROOT+"/index.php";p=p.split("/");if(p[0]==""||p[0]=="@"){p[0]=""}if(!p[1]){p[1]="Index"}if(!p[2]){p[2]="index"}o=o+"?s=/"+p[0]+"/"+p[1]+"/"+p[2];if(r){r=r.join("/");o=o+"/"+r}if(!q){o=o+".html"}}return o}return n})();if(!window.MozillaTool){window.MozillaTool=a}})();(function(){var a=(function(){var b=function(){};b.loadChannel=function(){c()};b.build=function(){c();$(document).on("click","a",function(g){var h=$(this),j=h.attr("target"),i=(j=="_blank"?true:false);!i&&(g.preventDefault());f(h,i)})};b.addLinkTrace=function(g,j){if(g&&g.length){var i=g.attr("target"),h=(i=="_blank"?true:false);f($(g),h,j)}};b.addFormTrace=function(j,n){if(j&&j.length){var g=$.trim(j.attr("trace-title")),l=g,m=j.attr("target"),h=$.trim(j.attr("restore")),k=h?true:(m=="_blank"?true:false);href=$.trim(j.attr("action")),key=$.trim(j.attr("trace-key"));if(!l){var i=j.find(".search-key");l=i.val()||"无关键字"}!h&&e(l,href,key,j,k);if(!k){return false}else{j.removeAttr("restore");return true}}};b.addTrace=function(j,g,i,h,l,k){e(j,g,i,h,l,k)};function f(k,m,n){var l=k.attr("title")||k.text(),h=k.attr("href")||"javascript:;",g=$.trim(k.attr("trace-key")),j=g?g:undefined;if(!j){var i=k.parents("[trace-key]").eq(0);j=i.length?(i.attr("trace-key")||"other_unknown"):undefined}e(l,h,j,k,m,n)}function e(k,g,i,h,n,m){var g=$.trim(g);if(g){var k=$.trim(k)||"无关键字",i=$.trim(i)||"other_unknown",j=new Image(),l=CHANNEL_ID;j.src=CONFIG.LINK.TRACE_IMG_URL+"?r="+Math.random()+"&d="+encodeURIComponent(document.location.host)+"&c="+encodeURIComponent(i)+"&a="+encodeURIComponent("")+"&u="+encodeURIComponent(g)+"&cid="+encodeURIComponent(l)+"&t="+encodeURIComponent(k);if(!n){j.onload=function(){if(m){m.call(null)}else{d(h,g)}};j.onerror=function(){if(m){m.call(null)}else{d(h,g)}}}}return n}function d(i,g){var i=$(i),h=$(i).get(0).tagName.toLowerCase();switch(h){case"form":i.attr("restore","1");i.submit();break;default:g&&(g!="javascript:;")&&(window.top.location.href=g);break}}function c(){if(NEW_EXTENSION){var h=new window.CustomEvent("WebChannelMessageToChrome",{detail:{id:window.mozCNChannel,message:{id:5,key:"startup.channelid"}}});window.dispatchEvent(h)}else{if(window.cehomepage||window.mozCNUtils){try{if(window.cehomepage){var i=window.cehomepage.startup;if(!i.channelid){CHANNEL_ID="unknown"}else{CHANNEL_ID=i.channelid()}}}catch(g){CHANNEL_ID="unknown"}}}}return b})();if(!window.TraceWidget){window.TraceWidget=a}})();(function(){var c=[],d=[];var a=function(){};a.build=function(f,h){var g=$(f);$.each(g,function(o,r){var l=r,k=$(l),q=k.next(),p=k.find("li"),m=k.attr("switch-type"),j=m?m.toLowerCase():"mouseover";if(j=="mouseover"){p.mouseenter(function(n){n.stopPropagation();var s=$(this),t=k.attr("minterval");if(s.attr("oit")!=undefined){return}(t!=null)&&clearInterval(parseInt(t));s.attr("overTime",new Date().getTime()).siblings().removeAttr("overTime");var i=setInterval(function(){if(s.attr("oit")==undefined){return}var u=new Date().getTime(),x=parseInt(s.attr("overTime"))||u,w=Math.abs(u-x);if(w>=CONFIG.OVER_TIME){var v=k.attr("minterval");if(v!=null){clearInterval(parseInt(v));k.removeAttr("minterval")}clearInterval(i);b(s,h)}},10);s.attr("oit",i).siblings().removeAttr("oit")});p.mouseleave(function(i){i.stopPropagation();var n=$(this);n.removeAttr("oit")})}else{p.on(j,function(i){i.stopPropagation();var n=$(this),s=k.attr("minterval");(s!=null)&&clearInterval(parseInt(s));b(n,h)})}})};a.randSwitch=function(f,h){var g=$(f);$.each(g,function(D,B){var F=B,k=$(F),A=k.attr("data-random");if(A){var j=k.find("li[no-random='']"),o=j.length,y=Math.random(),C=10,E=y*C;if(o>1){var u=[],l=0,z=0;for(var D=0;D<o;D++){var w=j.eq(D),t=$.trim(w.attr("rand-per")),s=0;if(t){s=parseFloat(t),F=l+s;if(F>1){s=1-l>0?1-l:0;l=1}else{l=F}}else{s=0}if(s==0){z++}u.push(s)}var q=l<1?((1-l)>0?(1-l)/z:0):0,v=[],m=0,x=0;for(var p=0;p<o;p++){var F=u[p],w=j.eq(p),r=F>0?F:q,m=m+r*C;v.push(m)}while(E>v[x]&&x<o){x++}b(j.eq(x),h)}else{j=k.find("li");j.length&&b(j.eq(Math.floor(y*j.length)),h)}}})};a.autoSwitch=function(f,h){var g=$(f);$.each(g,function(o,m){var s=m,r=$(m),p=r.next(),t=r.attr("data-auto");if(t){r.removeAttr("data-auto");var j=r.find("li[auto-enabled]"),l=j.length;var q=setInterval(function(){var u=j.filter(".on"),n=j.index(u),i=(n+1>l-1)?0:n+1;b(j.eq(i),h)},10000);r.attr("minterval",q);if(p.length&&t){p.on("mouseenter mouseover",function(i){i.stopPropagation();i.stopPropagation();var n=$(this);!n.attr("otime")&&n.attr("otime",new Date().getTime())});p.mouseleave(function(i){i.stopPropagation();var n=$(this);n.removeAttr("otime");if(r.attr("minterval")==undefined){n.off("mouseleave mouseover mouseenter");return}});var k=setInterval(function(){var u=r.attr("minterval");if(u!=undefined){var v=new Date().getTime(),n=p.attr("otime");if(n){var i=v-n;if(i>CONFIG.OVER_TIME){p.off("mouseover mouseleave mouseenter");clearInterval(u);clearInterval(k)}}}},500)}}})};a.showTab=function(f,g){b(f,g)};function b(g,j){if(!g||(g.size()&&g.hasClass("on"))){return}var i=g.attr("for"),h=$.trim(g.attr("load-url"));if(!i){return}g.addClass("on").siblings().removeClass("on");var f=i.split(",");j&&j.call(null,f[0],g);$.each(f,function(o,l){var q=$.trim(l);if(q){var p=$("#"+q);if(p.length){p.show().siblings().hide();if(h){var n="<div class='loading'>正在加载，请稍候~~</div>",k="<div class='error'>系统繁忙，请稍候再试</div>";p.html(n);$.ajax({url:h+"&ts="+new Date().getTime(),type:"get",dataType:"html",timeout:CONFIG.TIME_OUT,error:function(m){p.html(k)},success:function(m){if(m){g.removeAttr("load-url")}p.html(m?m:k)}})}else{MozillaTool.loadDelayResource(p);if(g.attr("data-loaded")){return}}}}})}function e(h){var g=[];switch(h){case"menu":g=c;c=[];break;case"cont":g=d;d=[];break}if(g.length){var i=0,f=g.length;for(;i<=f;i++){clearInterval(g[i])}}}if(!window.TabWidget){window.TabWidget=a}})();(function(){var b;var a=function(c){var d=this;d.settings={container:"",dotEle:"",prevEle:"",nextEle:"",auto:false,timeInterval:5000};d.settings=$.extend(d.settings,c);d.init();d.bindEvents()};a.prototype={tPage:0,cPage:0,bindEvents:function(){var f=this,e=f.settings,g=e.prevEle,d=e.nextEle,c=e.dotEle;if(g.length){g.on("click",function(i){i.stopPropagation();var j=f.cPage-1<0?f.tPage:f.cPage-1;f.showPage(j,true)})}if(d.length){d.on("click",function(i){i.stopPropagation();var j=f.cPage+1>=f.tPage?0:f.cPage+1;f.showPage(j,true)})}if(c.length){var h=e.dotEle.children();if(h.length){h.on("mouseover",function(i){i.stopPropagation();var j=$(this),k=j.index();f.showPage(k)})}}},init:function(){var e=this,d=e.settings,c=d.container;e.tPage=c.children().length;if(d.auto){if(e.tPage>1){b=setInterval(function(){var f=e.cPage+1>=e.tPage?0:e.cPage+1;e.showPage(f)},d.timeInterval)}}},showPage:function(j,f){var h=this,g=h.settings,e=g.container,d=e.children().eq(h.cPage),i=e.children(),c=i.eq(j);if(c.length){i.removeAttr("style");h.cPage=j;if(f){h.showPageDot(j);d.animate({opacity:0},1000);c.show().animate({opacity:1},1200,function(){c.addClass("on").siblings().hide().removeClass("on")})}else{c.show().addClass("on").siblings().hide().removeClass("on");h.showPageDot(j)}}},showPageDot:function(g){var f=this,e=f.settings,d=e.dotEle;if(d.length){var c=d.children().eq(g);if(c.length){c.addClass("on").siblings().removeClass("on")}}}};a.build=function(c){return new a(c)};!window.MozillaFPic&&(window.MozillaFPic=a)})();var SliderLib=(function(){var a={each:function(b,f){if(!f||!b){return}var d=this;if(d.likeArray(b)){for(var c=0;c<b.length;c++){if(f.call(null,c,b[c])==false){break}}}else{if(b.nodeType){f.call(b,b,b)}else{for(var e in b){if(f.call(null,e,b[e])==false){break}}}}},css:function(b,d){if(!d||!b){return}var c=this;c.each(b,function(e,f){for(var g in d){f.style[g]=d[g]}})},addClass:function(b,d){if(!b||!d){return}var c=this;c.each(b,function(e,f){c.classOpt(f,d,"add")})},removeClass:function(b,d){if(!b||!d){return}var c=this;c.each(b,function(e,f){c.classOpt(f,d,"remove")})},trim:function(b){return b.replace(/^\s+/).replace(/\s+$/)},likeArray:function(b){return typeof b.length=="number"},classOpt:function(c,l,h){if(!c){return}var f=this;var l=f.trim(l),g=c.className,k=g.replace(/\s+/," "),e=k.split(" "),d=[];for(var b=0;b<e.length;b++){var j=e[b];if(j!=l){d.push(j)}}if(h=="add"){d.push(l)}c.className=d.join(" ")}};return a})();window.SliderLib=SliderLib;(function(b){var a=(function(){var n=document.createElement("div"),d=n.style,e={},q=(function(){var x="t,webkitT,OT,MozT,msT".split(","),w=0,v,u=x.length;for(;w<u;w++){v=x[w]+"ransform";if(v in d){return x[w].substring(0,x[w].length-1)}}return false})(),l="ontouchstart" in window,m=j("perspective") in d,i=l?"touchstart":"mousedown",c=l?"touchmove":"mousemove",s=l?"touchend":"mouseup",p=j("transform"),f=j("transition"),o=m?"3d(":"(",h=m?",0px)":")",k=q?"-"+q+"-":"";var g=function(u,v){if(!u){return}var x=this,t,z;if(v){for(var y in x){var w=v[y];if(w!=undefined||w!=null){x[y]=w}}}x.container=u;x.scroller=u.querySelector("div");if(!x.scroller){return}x.__refreshDimension();x.__layout();if(x.autoSlide){x.__autoSwitch(x.autoInterval||10000)}if(x.initialPage){x.onMoveIndex(x.initialPage,null,0)}x.__bindEvents();return x};g.prototype={startX:0,startY:0,minusX:0,minusY:0,endX:0,endY:0,stepX:0,stepY:0,minX:0,maxX:0,sliderIndex:0,currentPage:0,pageCount:0,childCount:0,containerWidth:0,containerHeight:0,scroller:null,container:null,initialPage:0,navEle:null,navSelector:"a",navSelClass:null,pageEle:null,pageClass:"",pageSelClass:"",prevEle:null,nextEle:null,hidePageBtnClass:"",loopFlag:true,touchFlag:true,autoSlide:false,autoInterval:10000,pagingFunction:function(){},prevPage:function(t){this.__pageSwitch("prev",t)},nextPage:function(t){this.__pageSwitch("next",t)},onMoveIndex:function(v,F,w){var x=this;if(F==undefined||F==null){var C=x.currentPage,G=v-C,K=G>0?1:0,I=0;if(G==0){return}for(;I<Math.abs(G);I++){if(K){x.nextPage(w)}else{x.prevPage(w)}}return}var J=x.scroller,z=x.pageWidth,t=x.pageEle,H=x.navEle,B,E,u=x.navSelector,A=x.navSelClass,D=x.pageSelClass;x.sliderIndex=F;x.currentPage=v;x.moveCSS3({x:-z*F,y:0},w!=undefined?w:200);x.endX=-F*z;var y=v%x.pageCount;x.__togglePageBtn(y);if(H&&u&&A){B=H.querySelectorAll(u);b.removeClass(B,A);b.addClass(B[y],A)}if(t){E=t.querySelectorAll("span");if(E[y]){b.removeClass(E,D);b.addClass(E[y],D)}}x.pagingFunction&&(x.pagingFunction.call(x))},moveCSS3:function(x,w){var v=this;var t=v.scroller;if(!t){return}var u=t.style;u[p]="translate"+o+x.x+"px,"+x.y+"px"+h;w&&(u[f]=w+"ms")},handleEvent:function(u){var t=this;switch(u.type){case"touchstart":case"mousedown":t.__start(u);break;case"touchmove":case"mousemove":t.__move(u);break;case"touchend":case"mouseup":t.__end(u);break}},__refreshDimension:function(){this.containerWidth=this.container.clientWidth;this.containerHeight=this.container.clientHeight;this.pageWidth=this.containerWidth},__layout:function(){this.pageCount=this.scroller.children.length;this.childCount=this.pageCount;var y=this,z=y.loopFlag,C=y.container,H=y.scroller,D=y.pageCount,K=H.children,G=K[D-1],u=K[0],I=G.cloneNode(true),v=u.cloneNode(true),t=y.pageEle,A=y.prevEle,J=y.nextEle,E=y.navEle,x=y.navSelector,B=E&&E.querySelectorAll(x);pageHtm="",childIndex=0;C.style.overflow="hidden";H.style.cssText="width:100%;height:100%;"+k+"transform:translate"+o+"0px,0px"+h+";position:relative;";if(z&&D<3){y.childCount+=2;H.appendChild(v);H.appendChild(I)}y.maxX=(y.childCount-1)*y.pageWidth;b.each(H.children,function(L,N){if(N.nodeType){N.pg=L;var M=(L==y.childCount-1?(z?-1*100:childIndex*100):childIndex*100);b.css(N,{left:M+"%",width:"100%",height:"100%",position:"absolute",top:"0px",display:"block"});childIndex++}});if(t){if(D>1){for(var F=0;F<D;F++){var w=document.createElement("span");w.setAttribute("num",F);w.className=(F==y.currentPage?y.pageClass+" "+y.pageSelClass:y.pageClass);w.addEventListener("click",function(){var L=this.getAttribute("num");y.onMoveIndex(parseInt(L))},false);t.appendChild(w)}}else{t.style.display="none"}}if(E){SliderLib.addClass(B[y.currentPage],y.navSelClass?y.navSelClass:"");b.each(B,function(L,M){M.addEventListener("click",function(N){y.onMoveIndex(L)})})}if(A){A.addEventListener("click",function(L){y.prevPage()})}if(J){J.addEventListener("click",function(L){y.nextPage()})}},__autoSwitch:function(w){var v=this,x=v.loopFlag,t=v.pageCount,u=true;if(t<=1){return}slideInterval=setInterval(function(){if(x){v.nextPage(200)}else{var y=v.currentPage;if(y==0){u=true;v.nextPage(200)}else{if(y==t-1){u=false;v.prevPage(200)}else{if(u){v.nextPage(200)}else{v.prevPage(200)}}}}},w||10000)},__bindEvents:function(){var t=this;if(t.touchFlag){var u=t.container;u.addEventListener(i,t,false);u.addEventListener(c,t,false);u.addEventListener(s,t,false)}window.addEventListener("orientationchange",function(){setTimeout(function(){t.__refreshDimension();t.onMoveIndex(t.currentPage,t.sliderIndex,0)},500)},false);window.addEventListener("resize",function(){t.__refreshDimension();t.onMoveIndex(t.currentPage,t.sliderIndex,0)},false)},__start:function(v){if(this.initiated||!v){return}var u=this;u.initiated=true;u.moved=false;u.directionLocked=false;u.thresholdExceeded=false;var w=l?v.touches[0]:v,t=u.scroller;t.style.webkitTransition="0s";u.startX=w.pageX;u.startY=w.pageY;u.stepX=0;u.stepY=0},__move:function(w){if(!this.initiated||!w){return}var v=this,y=l?w.changedTouches[0]:w,x=v.currentPage,u=0,t=v.pageWidth;v.minusX=y.pageX-v.startX;v.minusY=y.pageY-v.startY;v.stepX+=Math.abs(v.minusX);v.stepY+=Math.abs(v.minusY);u=v.minusX+v.endX;if(v.stepX<10&&v.stepY<10){return}if(!v.directionLocked&&(v.stepX>v.stepX)){v.initiated=false;return}this.moved=true;w.preventDefault();v.directionLocked=true;if(!v.loopFlag){if(u>v.minX){v.minusX=0.2*t}if(u<-v.maxX){v.minusX=-0.2*t}}v.curX=v.minusX+v.endX;v.moveCSS3({x:v.curX,y:0})},__end:function(w){var u=this;if(!u.initiated||!w){return}u.initiated=false;if(!u.moved){return}var x=u.currentPage,t=u.sliderIndex,z=x,v=t,y=u.loopFlag;if(u.minusX>0){v=y?t-1:(t-1<0?0:t-1);u.prevPage()}else{if(u.minusX<0){v=y?t+1:(t+1>u.childCount-1?u.childCount-1:t+1);u.nextPage()}else{u.onMoveIndex(x,t)}}u.endX=-v*u.pageWidth},__pageSwitch:function(t,u){var C=this,B=C.scroller,D=C.sliderIndex,E=C.currentPage,y=C.childCount,v=C.pageCount,z=0,A=(t=="prev");if(C.loopFlag){z=A?(E-1<0?y-1:E-1):(E+1>y-1?0:E+1);var x=z,w=A?(x-1<0?y-1:x-1):(x+1>y-1?0:x+1);referChild=B.children[x],changeChild=B.children[w],referLeft=parseInt(referChild.style.left)/100;changeChild.style.left=((A?(referLeft-1):(referLeft+1))*100)+"%";C.onMoveIndex(z,A?D-1:D+1,u)}else{z=A?(E-1<0?0:E-1):(E+1>y-1?y-1:E+1);C.onMoveIndex(z,z,u)}},__togglePageBtn:function(t){if(this.loopFlag){return}var v=this,x=v.prevEle,u=v.nextEle;if(x){var w=r(x.nodeName);if(t<=0){if(v.hidePageBtnClass){b.addClass(x,v.hidePageBtnClass)}else{x.style.display="none"}}else{if(v.hidePageBtnClass){b.removeClass(x,v.hidePageBtnClass)}else{x.style.display=w}}}if(u){var y=r(u.nodeName);if(t>=v.pageCount-1){if(v.hidePageBtnClass){b.addClass(u,v.hidePageBtnClass)}else{u.style.display="none"}}else{if(v.hidePageBtnClass){b.removeClass(u,v.hidePageBtnClass)}else{u.style.display=y}}}}};function j(t){if(q===""){return t}t=t.charAt(0).toUpperCase()+t.substr(1);return q+t}function r(v){var t,u;if(!e[v]){t=document.createElement(v);document.body.appendChild(t);u=getComputedStyle(t,"").getPropertyValue("display");t.parentNode.removeChild(t);u=="none"&&(u="block");e[v]=u}return e[v]}return g})();if(!window.Slider){window.Slider=a}})(SliderLib);