var LOC=window.location,SOURCE_SUFFIX=__srcsuffix__,CHANNEL_ID="unknown",NEW_EXTENSION=!!window.mozCNChannel,NEW_EXTENSION_50=!(!window.mozCNChannel||"moz_cn_utils"==window.mozCNChannel),DOMAIN_TOP=document.domain.split(".").slice(-2).join(".");ROOT=LOC.protocol+"//"+LOC.hostname+LOC.pathname.replace(/\/$/,""),CLOSE_PMT_SKIN=!1,IFRAME_DATA={};var MOZ_INFO={TIME_OUT:1e4,OVER_TIME:300,SYSTEM_IS_BUSY:"系统繁忙，请稍后再试",DEFAULT_COOKIE_EXPIRE:new Date("December 31, 2100"),FETCH_CITY_FAILED:"获取城市列表失败，请稍后再试",LOAD_STR:"<div class='loading'><span>正在加载，请耐心等候..</span></div>",LOAD_ERROR:"<div class='error'>数据加载失败，请稍候再试</div>",WEATHER_LOAD_STR:"<div class='loading'><span>正在加载天气数据...</span></div>",OPERATE_STR:"<div class='loading'><span>正在操作，请耐心等候...</span></div>",SECRET_MODE:"您开启了【秘密浏览】模式，可能导致某些功能无法正常使用"};!function(){var e={__backend__:{setItem:function(e,t,i){var n;i?(n=new Date).setTime(i):n=MOZ_INFO.DEFAULT_COOKIE_EXPIRE;try{document.cookie=e+"="+escape(t+"")+"; path=/; domain="+DOMAIN_TOP+"; expires="+n.toGMTString()}catch(e){}},getItem:function(e,t){var i=null!=t?t:void 0;try{var n,a=document.cookie.split(";"),s=new RegExp("^ ?"+e+"=");for(n in a)if(s.test(a[n])){var o=a[n];i=unescape(o.substr(o.indexOf("=")+1))}}catch(e){}return i}},getItem:function(e,t){var i=null;try{i=null!==(i=this.__backend__.getItem(e))&&JSON.parse(i+"")||t}catch(e){i=t}return i},setItem:function(e,t,i){try{this.__backend__.setItem(e,JSON.stringify(t),i)}catch(e){}}};window.CookieWidget||(window.CookieWidget=e)}(),function(){var e={__backend__:null,storeList:{},init:function(){if(window.localStorage)try{this.__backend__=window.localStorage,this.__backend__.__type__="ls"}catch(e){i(MOZ_INFO.SECRET_MODE)}else if(window.globalStorage)try{this.__backend__=window.globalStorage,this.__backend__.__type__="gs"}catch(e){i(MOZ_INFO.SECRET_MODE)}else if(document.cookie)try{this.__backend__=CookieWidget.__backend__,this.__backend__.__type__="ck"}catch(e){i(MOZ_INFO.SECRET_MODE)}else this.backend={getItem:function(){return null},setItem:function(){},__type__:"dummy"}},getItem:function(e,t){var i=null;try{i=null!==(i=this.__backend__.getItem(e))&&JSON.parse(i+"")||t}catch(e){i=t}return i},setItem:function(e,t,i){try{this.__backend__.setItem(e,JSON.stringify(t)),this.storeList[e]=1}catch(e){}},clear:function(){var t=this,i=t.storeList;e.getItem("n_2014_s_version")!=__version__&&(__clears__&&__clears__.length?$.each(__clears__,function(e,i){t.setItem(i,"")}):$.each(i,function(e,i){t.setItem(e,"")}),t.setItem("n_2014_s_version",__version__))}},t=$("#system-error");function i(e){e&&t.html(e).show()}e.init(),window.StorageWidget||(window.StorageWidget=e)}(),function(){var e=function(){var t=navigator.userAgent,i="about:cehome",n="https://home.firefoxchina.cn",a="https://doc2.firefoxchina.cn/repair.html",s={MSIE:"https://doc2.firefoxchina.cn/repair_ie.html",Chrome:"https://doc2.firefoxchina.cn/repair_chrome.html",Firefox:a,Opera:"https://doc2.firefoxchina.cn/repair_opera.html",Safari:"https://doc2.firefoxchina.cn/repair_safari.html",SE:"","360SE":"https://doc2.firefoxchina.cn/repair_360.html","360JS":"https://doc2.firefoxchina.cn/repair_360.html",BIDUBrowser:"",QQBrowser:"",Maxthon:"",LBBROWSER:""},o=function(){};function r(){return{top:document.documentElement.scrollTop||document.body.scrollTop,left:document.documentElement.scrollLeft||document.body.scrollLeft}}function l(e){if(!(e&&e.length&&e.attr("loaded"))){var t=e?e.find(".img-load-delay"):$(".img-load-delay"),i=e?e.find(".iframe-load-delay"):$(".iframe-load-delay"),n=e?e.find(".back-load-delay"):$(".back-load-delay");e&&e.length&&!i.length&&!t.length&&e.attr("loaded","loaded"),t.length&&$.each(t,function(e,t){d($(t),"img-load-delay",!0)}),i.length&&$.each(i,function(e,t){d($(t),"iframe-load-delay")}),n.length&&$.each(n,function(e,t){d($(t),"back-load-delay")})}}function d(e,t,i){if(e.length){var n=e.attr("data-url");if("back-load-delay"==t&&(n=e.attr("data-style")),n)if("back-load-delay"==t){var a=e.attr("style");e.attr("style",(a||"")+n),e.removeAttr("data-style")}else{var s=!1,o=!1;e.attr("src",n),e.on("load",function(i){o||(s=!0,e.removeClass(t),e.removeAttr("data-url"))}),i&&setTimeout(function(){s||(o=!0,e.removeAttr("src"))},5e3)}}}function c(){var e=h();return s[e]?s[e]:a}function h(e){var i="",n=function(){for(var e=0,i="Firefox|MSIE|Chrome|Safari|Opera".split("|"),n=i.length,a="";e<n;e++){var s=i[e];if(t.indexOf(s)>-1){a=s;break}}return a}();if(function(){for(var e=0,i="MSIE|like Gecko".split("|"),n=i.length,a=!1;e<n;e++){var s=i[e];if(t.indexOf(s)>-1){a=!0;break}}return a}()){var a=function(){for(var e=0,i="QQBrowser|BIDUBrowser|Maxthon|LBBROWSER|360SE|SE".split("|"),n=i.length,a="";e<n;e++){var s=i[e];if(t.indexOf(s)>-1){a=s;break}}return a}();i=a||((i=function(){var e="";if(t.indexOf("360SE")>-1)e="360IE";else{var e="";if(function(){var e=t.indexOf("360chrome")>-1;try{window.external&&window.external.twGetRunPath&&window.external.twGetRunPath&&t.indexOf("360se")>-1&&(e=!0)}catch(t){e=!1}return e}())e="360SE";else{var i="track"in document.createElement("track"),n="scoped"in document.createElement("style"),a="v8Locale"in window;i&&n&&a?e="360SE":i&&n&&!a&&(e="360JS")}}return e}())||n)}else i=n;return e?e.toLowerCase()==i.toLowerCase():i}return o.escapeHtml=function(e){return function(e){return e?(e+"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;").replace(/\s/g,"&nbsp;").replace(/\(/g,"（").replace(/\)/g,"）"):""}(e)},o.isBrowser=function(e){return h(e)},o.getScrollPos=function(){return r()},o.getEleInfo=function(e){return function(e){if(!e||e&&!e.length)return null;var t=e.width(),i=e.height(),n=e.get(0).getBoundingClientRect(),a=r();return{width:t,height:i,scroll:a,client:n,pos:{top:n.top+a.top,left:n.left+a.left}}}(e)},o.checkLogin=function(){var e=CookieWidget.getItem("n_user_data"),t=!1;return e&&e.uname&&(t=!0),t},o.getRepairURL=function(){return c()},o.setHomePage=function(t){!function(t){var i=c();if(document.all)try{t.style.behavior="url(#default#homepage)",t.setHomePage(n)}catch(e){window.open(i)}else{var a=e.isBrowser("Firefox");if(a)if(NEW_EXTENSION);else{var s=window.cehomepage,o=window.cehp_xpi?window.cehp_xpi:"http://download.firefox.com.cn/chinaedition/addons/cehomepage/cehomepage-latest.xpi";if(s)try{confirm("确定设置当前页面为浏览器首页吗？")&&($(t).removeClass("on"),window.cehomepage.startup.setHome(n))}catch(e){window.open(i)}else new PopWidget({title:"设置主页",content:"<p class='home-hint'>要使用此功能，请安装<a href='"+o+"'>火狐主页扩展</a>插件</p>"})}else window.open(i)}}(t)},o.initHomePage=function(e){!function(e){var e=$(e);if(NEW_EXTENSION){var t={confirmMsg:"确定设置当前页面为浏览器首页吗？",highlight:"on",url:n},a=new window.CustomEvent("mozCNUtils:Register",{detail:{subType:"startup.maybeHighlightSetHomepage",elements:{anchor:e.get(0)},extras:t}});window.dispatchEvent(a)}else{var s=window.cehomepage;s?(startup=s.startup,startup.homepage()!=startup.cehomepage()&&startup.homepage()!=n&&startup.homepage()!=i||1!=startup.page()?e.addClass("on"):startup.homepage_changed()&&startup.homepage()!=startup.cehomepage()&&startup.homepage()!=n&&startup.homepage()!=i?e.addClass("on"):e.removeClass("on")):e.addClass("on")}}(e)},o.loadDelayResource=function(e){e&&e.length?$.each(e,function(e,t){l($(t))}):l(e)},o.loadResource=function(e){d(e)},o.getParam=function(e){var t=window.location.search;if(t)for(var i=t.substr(1).split("&"),n=0,a=i.length;n<a;n++){var s=i[n].split("=");if(s.length&&s[0]==e)return s[1]}return null},o.loadScrollResource=function(){var t,i;t=$(".mod-delay-resource"),i=document.documentElement.clientHeight,$.each(t,function(t,n){var a=$(n),s=a.get(0).getBoundingClientRect().top,o=a.height(),r=a.find(".tab-menu");if(s>0&&s<i+50||s<=0&&Math.abs(s)<o-50)if(a.attr("data-show",1),r.length){var l=r.find(".on"),d=r.find("li:eq(0)"),c=l.length?l:d,h=$.trim(c.attr("for"));if(h){var u=h.split(",");$.each(u,function(t,i){var n=$("#"+i);if(n&&n.length){var a=n.find(".slide-page"),s=n;a.length&&(s=a.eq(1)),e.loadDelayResource(s)}})}}else a&&a.length&&e.loadDelayResource(a);else a.removeAttr("data-show")})},o.getRandom=function(e,t){return function(e,t){var i="",n=[];for(;i.split(",").length<=t;){var a=Math.floor(Math.random()*e)+",";-1==i.indexOf(a)&&(i+=a)}return i&&(n=i.slice(0,-1).split(",")),n}(e,t)},o.dealScrollSidebar=function(e,t,i,n,a){return new MozillaScrollBar({barType:"relative",sideReferEle:e.find(".fixed-show"),sideTargetEle:e,footerEle:t,referEle:i,fixed_cls:n,absolute_cls:a})},o.loopMeta=function(e,t){return function e(t,i){var n=function(e,t){var i="",n=e[t],i=n;n&&"string"==typeof n&&(i=JSON.parse(n));return e[t]=i,e}(t,i);n&&(t=n);if(t.data){var a=t.data.length;if(a>0)for(var s=0;s<a;s++)t.data[s]=e(t.data[s],i)}return t}(e,t)},o.getTimestamp=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},o.covertMiliTime=function(e){var t=0;if(e){var i=e.split(/\s+/g);if(i.length>1){var n=$.trim(i[0]),a=$.trim(i[1]);if(n&&a){var s=n.split("-"),o=a.split(":"),r=parseInt(s[0]),l=parseInt(s[1]),d=parseInt(s[2]),c=parseInt(o[0]),h=parseInt(o[1]),u=new Date;return u.setFullYear(r),u.setMonth(l-1),u.setDate(d),u.setHours(c),u.setMinutes(h),u.setSeconds(0),u.setMilliseconds(0),t=u.getTime()}}}return t},o}();window.MozillaTool||(window.MozillaTool=e)}(),function(){var e=function(e){this.settings={barType:"relative",sideReferEle:null,sideTargetEle:null,footerEle:null,referEle:null,fixed_cls:"",absolute_cls:""},this.settings=$.extend(this.settings,e),this.settings.init&&this.settings.init.call(this)};e.prototype={init:!1,initPos:null,initFixedPos:null,scroll:function(){var e=this.settings,t=e.sideReferEle,i=e.sideTargetEle,n=e.footerEle,a=e.referEle;if(t.length&&i.length&&n.length){var s,o=MozillaTool.getScrollPos().top;switch(pageVisHeight=document.documentElement.clientHeight,barType=e.barType,sideReferHeight=t.height(),sideTargetHeight=i.height(),footerHeight=n.height(),sideReferTop=t.get(0).getBoundingClientRect().top,footerTop=n.get(0).getBoundingClientRect().top,pageMinus=pageVisHeight-sideReferHeight,barType){case"relative":s={addScrollFlag:!a.length||a.height()>sideTargetHeight&&sideTargetHeight>pageVisHeight,addAbsoluteFlag:footerTop>0&&footerTop<pageVisHeight-footerHeight+50,sTop:o,sideReferTop:sideReferTop,pageMinus:pageMinus},this.scrollRelative(s);break;case"absolute":s={sTop:o,footerTop:footerTop,sideReferHeight:sideReferHeight},this.scrollAbsolute(s)}}},scrollRelative:function(e){if(e.addScrollFlag){var t=this.settings,i=t.fixed_cls,n=t.absolute_cls,a=t.sideReferEle,s=t.sideTargetEle,o=a.get(0).getBoundingClientRect().top;if(this.initPos||(this.initPos=o+e.sTop),!this.init)o<=e.pageMinus&&(this.init=!0,s.addClass(n+" "+i));if(e.addAbsoluteFlag)s.removeClass(i);else if(this.init)e.sTop<this.initPos-e.pageMinus?(this.init=!1,s.removeClass(n+" "+i)):s.addClass(n+" "+i)}},scrollAbsolute:function(e){var t=this.settings,i=t.absolute_cls,n=t.fixed_cls,a=t.sideReferEle,s=t.sideTargetEle,o=a.get(0).getBoundingClientRect().top;(this.initPos||(this.initPos=o+e.sTop),e.sTop>=this.initPos)?(s.addClass(n),this.init||(this.init=!0,this.initFixedPos=a.position().top),e.footerTop<=this.initFixedPos+e.sideReferHeight+10?s.addClass(i):s.removeClass(i)):(this.init=!1,s.removeClass(n+" "+i))}},!window.MozillaScrollBar&&(window.MozillaScrollBar=e)}(),function(){var e=function(){var e=function(){};e.loadChannel=function(){a()},e.build=function(e){a(),$(document).on("click","a",function(e){i($(this))}),$(document).on("submit","form",function(e){var t=$(this),i=t.find(".engine-key"),a=t.find(".engine-key-hidden"),s=i.val()||"无关键字",o=t.attr("trace-url"),r=t.attr("trace-key")||t.attr("track-key");(i.length&&a.length&&(a.val(i.val()),$(".search-engine .engine-key").val("")),t.hasClass("engine-trace-form"))&&(o=t.attr("action")+"?q="+s+"&engine="+$.trim(t.find(".engine-type").val()));t.attr({"trace-title":s,"trace-url":o}),n(s,o,r)})},e.addLinkTrace=function(e){i($(e))},e.addTrace=function(e,t,i,a,s){n(e,t,i,a,s)};var t={};function i(e,t){var i=e.attr("title")||e.text(),a=e.attr("href")||"javascript:;",s=$.trim(e.attr("trace-key")||e.attr("track-key")),o=s||void 0;if("news_tfeed_tparty"==o&&(n(i,a,o,e,t),o=""),!o){var r=e.parents("[trace-key],[track-key]").eq(0);o=r.length?r.attr("trace-key")||r.attr("track-key")||"other_unknown":void 0}n(i,a,o,e,t)}function n(e,t,i,n,a){if(t=$.trim(t)){e=$.trim(e)||"无关键字",i=$.trim(i)||"other_unknown";var s=new Image,o=CHANNEL_ID;s.src="2019/img/trace_2014.gif?r="+Math.random()+"&d="+encodeURIComponent(document.location.host)+"&c="+encodeURIComponent(i)+"&a="+encodeURIComponent("")+"&u="+encodeURIComponent(t)+"&cid="+encodeURIComponent(o)+"&t="+encodeURIComponent(e)}}function a(){if(NEW_EXTENSION){var e={id:window.mozCNChannel,message:{id:5,key:"startup.channelid"}},t=new window.CustomEvent("WebChannelMessageToChrome",NEW_EXTENSION_50?{detail:JSON.stringify(e)}:{detail:e});window.dispatchEvent(t)}else if(window.cehomepage||window.mozCNUtils)try{if(window.cehomepage){var i=window.cehomepage.startup;CHANNEL_ID=i.channelid?i.channelid():"unknown"}}catch(e){CHANNEL_ID="unknown"}}return e.addDisplayTrace=function(e,i,a,s){var o=new Date,r=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),l=StorageWidget.getItem("n_2014_dp_data",t),d=l;if(l.time!=r)(d={}).time=r,d[e]=1;else{if(l[e])return;d[e]=1}t=d,n(i,a,s),StorageWidget.setItem("n_2014_dp_data",d)},e}();window.TraceWidget||(window.TraceWidget=e)}(),function(){var e=function(){var e=function(e){for(var t in this.settings={wrapper:"",navEle:"",radioEle:"",logoListEle:"",formEle:"",keyEle:"",logoShowEle:"",logoMoreEle:"",linkEle:"",curEle:"",tipEle:"",tipKeySelector:"",tipShowSelector:"",hotBtnEle:"",bubbleEle:"",hotListEle:"",tipSelectClass:"selected",navSelectClass:"on",lastNavClass:"last"},e)null!=this.settings[t]&&(this.settings[t]=e[t]);this.init()};function t(e,t,i){if(window.baidu={sug:function(e){i&&i.call(null,e)}},t){var n="//www.baidu.com/su?ie=utf-8&wd="+encodeURIComponent(t);$.ajax({url:n,type:"get",dataType:"script",scriptCharset:"gbk",timeout:MOZ_INFO.TIME_OUT,error:function(e,t,i){console.log(i)}})}}return e.prototype={initiated:!1,showHotBtn:!0,showBubble:!0,showAuto:!1,navIndex:0,radioIndex:0,lastword:"",engineTabs:[{name:"web",label:"网页",lists:[{name:"baidu_web",traceKey:"search_web_baidu",label:"百度",url:"//i.g-fox.cn/search",classname:"baidu-logo",href:"https://www.baidu.com/index.php?tn=monline_3_dg",charset:"utf-8"},{name:"google_web",traceKey:"search_web_google",label:"谷歌",url:"//i.g-fox.cn/search",classname:"google-logo",href:"https://www.google.com/",charset:"utf-8"}]}],bindEvents:function(){var e=this,t=e.settings,i=t.wrapper,n=t.formEle,a=t.keyEle,s=t.logoShowEle,o=t.logoMoreEle,r=(t.tipEle,t.tipKeySelector),l=t.tipShowSelector,d=t.hotBtnEle,c=t.bubbleEle,h=t.hotListEle,u=t.logoListEle,g=$(r),f=$(l),p=t.tipSelectClass;d.on("click",function(t){t.stopPropagation(),e.dealHotRecommend(),t.preventDefault()}),c.on("click",function(t){t.stopPropagation(),e.dealHotRecommend(),t.preventDefault()}),h.find(".engine-hot-set input,.engine-hot-set label").on("click",function(t){t.stopPropagation(),this.checked?(e.showAuto=!0,StorageWidget.setItem("n_2014_hot_auto",1)):(e.showAuto=!1,StorageWidget.setItem("n_2014_hot_auto",-1))}),$(document).on("click",".engine-hint-list li",function(t){var a=$(this),s=$.trim(a.find("span").text());g.val(s),e.lastword=s;var o=$.trim(n.attr("trace-key")),r=a.parents("#engine-hot-show");r.length&&(newKey=r.eq(0).attr("trace-key"),n.attr("trace-key",newKey),i.removeClass("expand")),n.submit(),n.attr("trace-key",o),i.find(".engine-hint-list").hide(),g.val(""),e.lastword="",t.preventDefault()}),a.click(function(t){t.stopPropagation(),!$.trim($(this).val())&&e.showAuto&&e.showHotBtn&&(e.initiated=!0,e.showHotRecommend())}),$(r).keyup(function(t){t.stopPropagation();var i=$(this),n=t.keyCode,a=i.parent(),s=a.find(l),o=a.find(".engine-hot-list"),r=s.find("li").length,d=s.find("."+p),c="",h=-1,u=0;if(d.length&&(h=d.eq(0).index()),38==n)u=h>0?h-1:r-1,f.find("li:eq("+u+")").addClass(p).siblings().removeClass(p),c=s.find("li."+p+" span").html(),g.val(c),e.lastword=c;else if(40==n)u=h<r-1?h+1:0,f.find("li:eq("+u+")").addClass(p).siblings().removeClass(p),c=s.find("li."+p+" span").html(),g.val(c),e.lastword=c;else if(13==n)f.hide();else{!$.trim(i.val())&&e.showAuto&&e.showHotBtn&&e.initiated?o.length&&e.showHotRecommend():(o.length&&e.hideHotRecommend(),f.hide(),e.showSearchTips($(this),s))}}),o.on("click",function(e){e.stopPropagation();var t=$(this);t.is(":visible")&&(t.hasClass("expand")?(t.removeClass("expand"),u.hide()):(t.addClass("expand"),u.show())),e.preventDefault()}),$(document).on("click",".engine-logo-list span",function(t){t.stopPropagation();var i=$(this),n=(i.parents(".engine-logos").eq(0),i.attr("nindex")),r=i.attr("rindex");u.hide(),o.removeClass("expand"),s.attr("class",i.attr("class")),e.showSearchInput(n,r),StorageWidget.setItem("n_2014_engine_index",r),a.focus(),e.initiated=!1,t.preventDefault()})},init:function(){var e=this.settings,t=e.bubbleEle,i=e.hotListEle,n=e.keyEle,a=new Date,s=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();switch(sBubble=StorageWidget.getItem("n_2014_s_bubble",0),hotAuto=StorageWidget.getItem("n_2014_hot_auto",-1),engineIndex=StorageWidget.getItem("n_2014_engine_index",0),sBubble?sBubble!=s&&(t.length&&t.show(),StorageWidget.setItem("n_2014_s_bubble","")):(t.length&&t.show(),StorageWidget.setItem("n_2014_s_bubble","")),hotAuto){case 1:this.showAuto=!0,i.find(".engine-hot-set input").get(0).checked=!0}this.bindEvents(),this.showSearchFrame(engineIndex),n.focus()},dealHotRecommend:function(){this.settings.wrapper.hasClass("expand")?this.hideHotRecommend():this.showHotRecommend()},showHotRecommend:function(){var e=this.settings,t=e.wrapper,i=e.hotListEle,n=e.bubbleEle;if(t.find(".engine-hint-list").hide(),t.addClass("expand"),i.show(),this.showBubble&&n.length){n.remove(),this.showBubble=!1;var a=new Date,s=a.getFullYear()+"-"+(1+a.getMonth())+"-"+a.getDate();StorageWidget.setItem("n_2014_s_bubble",s)}},hideHotRecommend:function(e){var t=this.settings.wrapper;t.removeClass("expand"),t.find(".engine-hint-list").hide()},showSearchTips:function(e,i){var n=this.settings,a=n.tipKeySelector,s=n.tipShowSelector,o=$(s),r=$(a),l=e.val(),d=$.trim(l);d&&d!=this.lastWord&&(this.lastword=d,r.val(l),t(i,d,function(e){if(i.length&&e&&e.s){var t="",n=e.s.length,a=0;if(i.empty(),n){for(t+="<ul>";a<n;a++)t+="<li><span>"+e.s[a]+"</span></li>";t+="</ul>",o.html(t),i.show()}else i.hide()}}))},showSearchFrame:function(e){this.showSearchInput(0,e),this.showSearchLogo(0,e)},showSearchNav:function(){var e=this,t=e.settings,i=(t.wrapper,t.hotBtnEle,t.navSelectClass),n=t.lastNavClass,a=t.navEle,s=t.keyEle,o=e.engineTabs,r=o.length,l="",d=!1;$.each(o,function(e,t){"web"==t.name&&(d=!0),l+="<span  data-name='"+t.name+"' "+(0==e?" class='"+i+"'":e==r-1?" class='"+n+"'":"")+">"+t.label+"</span>"}),a.html(l),d&&e.dealHotBtn(!0);var c=a.find("span");c.click(function(t){var n=$(this),a=n.index(),o=n.attr("data-name");c.removeClass(i),n.addClass(i),"web"==o?e.dealHotBtn(!0):e.dealHotBtn(),e.showSearchInput(a,0),e.showSearchLogo(a,0),s.focus(),e.initiated=!1,t.preventDefault()})},dealHotBtn:function(e){var t=this.settings,i=(t.wrapper,t.hotBtnEle),n=t.bubbleEle;e?(this.showHotBtn=!0,i.show(),this.showBubble&&n.length&&n.show()):(this.showHotBtn=!1,i.hide(),n.length&&n.hide(),this.hideHotRecommend())},showSearchInput:function(e,t){var i=this.settings.curEle,n=this.engineTabs[e].lists;engine=n[t],i.val(engine.name),this.dealSearchParam(e,t)},showSearchLogo:function(e,t){var i=this.settings,n=this.engineTabs,a=(i.formEle,i.curEle,i.logoShowEle,i.linkEle,i.radioEle),s=i.logoMoreEle,o=i.logoListEle,r=n[e].lists;elen=r.length,htm="",s.removeClass("expand"),a.empty(),elen>1?($.each(r,function(t,i){var n=r[t];htm+="<p "+(0==t?"class='first'":"")+"><span nindex='"+e+"' rindex='"+t+"' class='engine-logo "+n.classname+"' title='"+n.label+"'>"+n.label+"</span></p>"}),s.css({display:"block"}),o.html(htm)):(s.hide(),o.hide())},dealSearchParam:function(e,t){var i=this.settings,n=i.curEle,a=i.formEle,s=i.logoShowEle,o=this.engineTabs[e].lists;engine=o[t],a.attr({action:engine.url,"accept-charset":engine.charset,"trace-title":engine.label,"trace-url":engine.url,"trace-key":engine.traceKey}),s.attr({class:"engine-logo "+engine.classname,href:engine.href,title:engine.label}),n.val(engine.name),this.navIndex=e,this.radioIndex=t}},e.build=function(t){new e(t)},e.showInputTips=function(e,i){t(e,i)},e}();window.EngineWidget||(window.EngineWidget=e)}(),function(){var e=[{img:"img/thumbs/default.jpg",name:"默认皮肤",title:"蓝色海洋",type:"blue",classname:"skin-default"},{img:"img/thumbs/firefox.jpg",name:"火狐萌萌哒",type:"firefox"},{img:"img/thumbs/s-autumn.jpg",name:"春花秋色",type:"s-autumn"},{img:"img/thumbs/cloud.jpg",name:"漫游云端",type:"cloud"},{img:"img/thumbs/firefox.jpg",name:"火狐萌萌哒",type:"firefox"},{img:"img/thumbs/firefox.jpg",name:"火狐萌萌哒",type:"firefox"},{img:"img/thumbs/firefox.jpg",name:"火狐萌萌哒",type:"firefox"},{img:"img/thumbs/firefox.jpg",name:"火狐萌萌哒",type:"firefox"},{img:"img/thumbs/firefox.jpg",name:"火狐萌萌哒",type:"firefox"},{img:"img/thumbs/firefox.jpg",name:"火狐萌萌哒",type:"firefox"},{img:"img/thumbs/firefox.jpg",name:"火狐萌萌哒",type:"firefox"},{img:"img/thumbs/firefox.jpg",name:"火狐萌萌哒",type:"firefox"}],t=function(e){this.settings={displayWrapper:"",panel:"",panelMenuEle:"",wrapper:"",container:"",scroller:"",coupletEle:"",themePriorityEle:"",skinEle:"",cPageEle:"",tPageEle:""},this.settings=$.extend(this.settings,e),this.init(),this.bindEvents()};t.prototype={skinData:null,tempSkin:null,pageSize:6,skinSlide:null,bindEvents:function(){var e=this,t=e.settings,i=t.wrapper,n=t.container,a=t.scroller,s=t.coupletEle,o=t.themePriorityEle,r=t.prevEle,l=t.nextEle,d=(i.attr("id"),t.cPageEle),c=t.tPageEle;a.find(".btn-color").on("click",function(t){t.stopPropagation();var i=$(this),n=i.attr("data-type");e.changeSkin(i,n),t.preventDefault()}),SlideWidget.build({container:n,scroller:a,nextEle:l,prevEle:r,success:function(e,t){d.html(e+1),c.html(t)}}),i.find(".btn-confirm").on("click",function(t){t.stopPropagation(),e.hidePanel(),e.saveSkin()}),i.find(".btn-cancel").on("click",function(t){t.stopPropagation(),e.initSkinStyle(e.skinData),e.hidePanel()}),s.length&&s.find(".mod span").on("click",function(e){e.stopPropagation(),s.remove();var t=new Date,i=t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate();StorageWidget.setItem("n_2014_couplet",i)}),o.length&&o.find(".close").on("click",function(e){e.stopPropagation(),confirm("嘤嘤嘤~~ 你真的要关闭此皮肤吗？")&&(StorageWidget.setItem("n_2014_theme_priority",-1),o.hide(),CLOSE_PMT_SKIN=!0,$(".skin-close-refer").show())})},init:function(){var e=StorageWidget.getItem("n_2014_skin",{img:"img/thumbs/default.jpg",name:"默认皮肤",title:"蓝色海洋",type:"blue",classname:"skin-default"});this.initSkinStyle(e,!0),this.loadSkinList()},initSkinStyle:function(e,t){this.settings.displayWrapper,$("#moz-skin"),e=e||StorageWidget.getItem("n_2014_skin");t&&TraceWidget.addDisplayTrace("skin",e.title,e.url,"display_skin"),this.skinData=e,this.changeSkin(this.settings.scroller.find(".btn-color[data-type='"+e.type+"']").eq(0),e.type)},loadSkinList:function(){var t=this.skinData.type||"blue",i=this.settings,n=i.cPageEle,a=i.tPageEle,s=i.wrapper.find(".skin-scroller"),o=(s.find("li").length,""),r=this.pageSize,l=0,d=e.length;for(n.html(1),a.html(Math.ceil(d/r));l<d;l++){var c=e[l],h=c.classname,u=c.optionList,g="",f=!1,p=!1;(l+1)%r==1?(o+="<div class='slide-page'> <ul>",p=!0):p=!1,u&&u.length&&(g+="<div class='skin-color-option'>",$.each(u,function(e,i){var n=!1;t==i.type&&(n=!0,f=!0),g+="<a href='javascript:;' data-title='"+(i.title?i.title:i.name)+"' class='btn-color"+(i.classname?" "+i.classname:"")+(n?" selected":"")+"' data-type='"+i.type+"'></a>"}),g+="</div>"),t==c.type&&(f=!0);var m=c.author?"<span>"+c.author+"</span>":"";o+="<li data-title='"+(c.title?c.title:c.name)+"' class='btn-color"+(p?" first ":"")+(h?" "+h:"")+(f?" selected":"")+"' data-type='"+c.type+"'>   <div class='skin-img'><img class='img-load-delay' src='' data-url='"+c.img+"'/>"+g+m+"</div>      <div class='skin-name'>       <span class='moz-radio'>"+c.name+(c.recommend?"<sup>新</sup>":"")+"</span></div></li>",(l+1)%6!=0&&l!=d-1||(o+="</ul></div>")}s.append(o)},changeSkin:function(e,t){var i=this.settings,n=i.wrapper,a=i.displayWrapper,s=i.skinEle,o=(t=null!=t?t:"blue")?"blue"==t?"":(__tflag__?"srcode/2019/":"2019/")+"css/skin/"+t+(__tflag__?"":SOURCE_SUFFIX)+".css?"+__skversion__:"";s.attr("href",o),this.tempSkin={title:e.attr("data-title")||"无关键字",type:t,url:t},n.find(".btn-color").removeClass("selected"),a.attr("class",t);var r=i.panelMenuEle,l=$("#theme-side-bar-recs");if(r.removeClass("holiday").find("em").html(""),l.length){var d=l.find("#theme-side-bar-"+t);d.length?(d.show().siblings().hide(),l.show()):l.hide()}switch(t){case"blue":n.find(".skin-default").addClass("selected");break;case"orange":case"yellow":case"green":case"dblue":case"yellow":case"purple":var c=n.find(".skin-color"),h=c.find(".color-"+t);c.addClass("selected"),h.addClass("selected");break;default:e.addClass("selected")}},dealCouplet:function(e){var t=this.settings.coupletEle,i=(s=new Date).getFullYear()+"-"+s.getMonth()+"-"+s.getDate(),n=StorageWidget.getItem("n_2014_couplet",null);if(t.length&&n!=i){var a=t.find("img"),s="201w1023";a.length&&($.each(a,function(e,i){var n=$(i),a=n.attr("data-url");a&&(n.attr("src",a+"?v="+s),n.removeAttr("data-url")),n.on("load",function(){t.find("span").show()})}),1==e?t.show():t.hide())}},saveSkin:function(){this.skinData=this.tempSkin,StorageWidget.setItem("n_2014_skin",this.skinData)},hidePanel:function(){var e=this.settings,t=e.panel,i=e.panelMenuEle;t.slideUp(500),i.removeClass("on")}},t.build=function(e){new t(e)},window.SkinWidget||(window.SkinWidget=t)}(),function(){var e=function(e){};function t(e,t){if(!(!e||e.length&&e.hasClass("on"))){var i=e.attr("for");if(i){e.addClass("on").siblings().removeClass("on");var n=i.split(",");$.each(n,function(i,n){var a=$.trim(n);if(a){var s=$("#"+a),o=s.hasClass("mod-delay-resource")?s:s.parents(".mod-delay-resource:eq(0)"),r=!0;if(o.length&&!o.attr("data-show")&&(r=!1),s.length){if(s.show().siblings().hide(),r){var l=s.find(".slide-page"),d=s;if(l.length)d=s.find("[loaded=loaded]").length?null:l.eq(1);d&&d.length&&MozillaTool.loadDelayResource(d)}if(e.attr("data-loaded"))return;t&&$.isFunction(t)&&t.call(null,e)}}})}}}e.build=function(e,i){$(e);$.each(e,function(e,n){var a=$(n),s=(a.next(),a.find("li")),o=a.attr("switch-type"),r=o?o.toLowerCase():"mouseover";"mouseover"==r?(s.mouseenter(function(e){e.stopPropagation();var n=$(this),s=a.attr("minterval");if(null==n.attr("oit")){null!=s&&clearInterval(parseInt(s)),n.attr("overTime",(new Date).getTime()).siblings().removeAttr("overTime");var o=setInterval(function(){if(null!=n.attr("oit")){var e=(new Date).getTime(),s=parseInt(n.attr("overTime"))||e;if(Math.abs(e-s)>=MOZ_INFO.OVER_TIME){var r=a.attr("minterval");null!=r&&(clearInterval(parseInt(r)),a.removeAttr("minterval")),clearInterval(o),t(n,i)}}},10);n.attr("oit",o).siblings().removeAttr("oit")}}),s.mouseleave(function(e){e.stopPropagation(),$(this).removeAttr("oit")})):s.on(r,function(e){e.stopPropagation();var n=$(this),s=a.attr("minterval");null!=s&&clearInterval(parseInt(s)),t(n,i)})})},e.randSwitch=function(e){var i=$(e);$.each(i,function(e,i){var n=i,a=$(n);if(a.attr("data-random")){var s=a.find("li[no-random='']"),o=s.length,r=Math.random(),l=10*r;if(o>1){var d=[],c=0,h=0;for(e=0;e<o;e++){var u=s.eq(e),g=$.trim(u.attr("rand-per")),f=0;g?(n=c+(f=parseFloat(g)))>1?(f=1-c>0?1-c:0,c=1):c=n:f=0,0==f&&h++,d.push(f)}for(var p=c<1&&1-c>0?(1-c)/h:0,m=[],v=0,w=0,_=0;_<o;_++){n=d[_],u=s.eq(_),v=v+10*(n>0?n:p);m.push(v)}for(;l>m[w]&&w<o;)w++;t(s.eq(w))}else(s=a.find("li")).length&&t(s.eq(Math.floor(r*s.length)))}})},e.autoSwitch=function(e){var i=$(e);$.each(i,function(e,i){var n=$(i),a=n.next(),s=n.attr("data-auto");if(s){n.removeAttr("data-auto");var o=n.find("li[auto-enabled]"),r=o.length,l=setInterval(function(){var e=o.filter(".on"),i=o.index(e),n=i+1>r-1?0:i+1;t(o.eq(n))},1e4);if(n.attr("minterval",l),a.length&&s){a.on("mouseenter mouseover",function(e){e.stopPropagation(),e.stopPropagation();var t=$(this);!t.attr("otime")&&t.attr("otime",(new Date).getTime())}),a.mouseleave(function(e){e.stopPropagation();var t=$(this);t.removeAttr("otime"),null!=n.attr("minterval")||t.off("mouseleave mouseover mouseenter")});var d=setInterval(function(){var e=n.attr("minterval");if(null!=e){var t=(new Date).getTime(),i=a.attr("otime");if(i)t-i>MOZ_INFO.OVER_TIME&&(a.off("mouseover mouseleave mouseenter"),clearInterval(e),clearInterval(d))}},500)}}})},e.showTab=function(e,i){t(e,i)},window.TabWidget||(window.TabWidget=e)}(),function(){var e={w:{type:"w",title:"宽屏版",traceurl:"w",cssurl:(__tflag__?"srcode/":"")+"css/mozWideStyle"+SOURCE_SUFFIX+".css?"+__wdversion__,classname:"ver-wide"},s:{type:"s",title:"标准版",traceurl:"s",cssurl:"",classname:""}},t=(__tflag__,__lsversion__,{type:"r",title:"右侧边栏",traceurl:"r",cssurl:"",classname:"side-dir-r"}),i=function(e){this.settings={panel:"",panelMenuEle:"",wrapper:"",versionEle:"",dirEle:"",recEle:"",flipEle:"",verDisplayWrapper:"",verRelatedCSS:"",dirRelatedCSS:"",recRelatedEle:"",flipRelatedEle:""},this.settings=$.extend(this.settings,e),this.bindEvents(),this.init()};function n(e){if(!e.length)return!1;var t=e.parent();return!e.hasClass("selected")&&(t.find(".moz-radio").removeClass("selected"),e.addClass("selected"),!0)}i.prototype={verData:null,dirData:null,recData:null,flipData:null,defaultSettings:{pver:"s",sdir:"r",rshow:"s",sflip:"s"},bindEvents:function(){var e=this,t=e.settings,i=t.wrapper,a=t.verEle,s=(t.dirEle,t.recEle),o=t.flipEle;t.verRelatedCSS,t.dirRelatedCSS;a.find(".opt-radio").on("click",function(t){t.stopPropagation();var i=$(this),a=i.attr("data-type");n(i)&&e.verSwitch(a)}),s.find(".opt-radio").on("click",function(t){t.stopPropagation();var i=$(this),a=i.attr("data-type");n(i)&&e.recSwitch(a)}),o.find(".opt-radio").on("click",function(t){t.stopPropagation();var i=$(this),a=i.attr("data-type");n(i)&&e.flipSwitch(a)}),i.find(".btn-confirm").on("click",function(t){t.stopPropagation(),e.saveSet(),e.hidePanel()}),i.find(".btn-cancel").on("click",function(t){t.stopPropagation(),e.restoreSet(),e.saveSet(),e.hidePanel()})},init:function(){var i=StorageWidget.getItem("n_2014_ver"),n=StorageWidget.getItem("n_2014_dir"),a=StorageWidget.getItem("n_2014_record"),s=StorageWidget.getItem("n_2014_flip");
//!verData && (verData = {type:"s",title:"标准版",url:"s"});
//!dirData && (dirData = {type:"r",title:"右侧边栏",url:"r"});
//!verData && (verData = WIDE_STYLE_LIST["s"]); //默认为普通版
!n&&(n=t),!a&&(a=this.defaultSettings.rshow),!s&&(a=this.defaultSettings.sflip),i=e.w,this.verData=i,this.verSwitch(i.type,!0),this.dirData=n,this.recData=a,this.flipData=s,this.recSwitch(a,!0),this.flipSwitch(s,!0),TraceWidget.addDisplayTrace("ver",i.title,i.traceurl,"display_width"),TraceWidget.addDisplayTrace("dir",n.title,n.traceurl,"display_side")},saveSet:function(){StorageWidget.setItem("n_2014_ver",this.verData),StorageWidget.setItem("n_2014_dir",this.dirData),StorageWidget.setItem("n_2014_record",this.recData),StorageWidget.setItem("n_2014_flip",this.flipData)},restoreSet:function(){var e=this.defaultSettings;this.verSwitch(e.pver,!0),this.recSwitch(e.rshow,!0),this.flipSwitch(e.sflip,!0)},verSwitch:function(t,i){var n=this.defaultSettings,a=this.settings,s=(a.verDisplayWrapper,a.verRelatedCSS),o=a.verEle,r=(t=t||n.pver,e.s);switch(t){case"w":r=e.w}this.verData=r,s.on("load",function(e){}),i&&o.find(".opt-radio[data-type='"+t+"']").addClass("selected").siblings().removeClass("selected")},recSwitch:function(e,t){var i=this.defaultSettings,n=(e=e||i.rshow,this.settings),a=n.recEle,s=n.recRelatedEle;switch(this.recData=e,e){case"h":s.hide();break;default:s.show()}t&&a.find(".opt-radio[data-type='"+e+"']").addClass("selected").siblings().removeClass("selected")},flipSwitch:function(e,t){var i=this.defaultSettings,n=(e=e||i.sflip,this.settings),a=n.flipEle,s=n.flipRelatedEle;switch(this.flipData=e,e){case"h":s.hide(),s.removeAttr("flip");break;default:s.attr("flip","flip")}t&&a.find(".opt-radio[data-type='"+e+"']").addClass("selected").siblings().removeClass("selected")},hidePanel:function(){var e=this.settings,t=e.panel,i=e.panelMenuEle;t.slideUp(500),i.removeClass("on")}},i.build=function(e){new i(e)},window.SetWidget||(window.SetWidget=i)}(),function(){var e=function(){};function t(e,t,i){var n=Math.floor(Math.random()*e);if(t)for(;t.imgURL&&i[n]&&t.imgURL==i[n].imgURL||t.frameURL&&i[n]&&t.frameURL==i[n].frameURL;)n=Math.floor(Math.random()*e);return i[n]}e.build=function(e){var i=e.hiddenEle;if(i.length){var n=e.wrapper,a=i.find("li"),s=(a.length,[]),o=[],r=[],l=!1;$.each(a,function(e,t){var i=$(t),n={};if(n.title=$.trim(i.attr("data-title")),n.frameURL=$.trim(i.attr("data-iframe")),n.linkURL=$.trim(i.attr("data-url")),n.imgURL=$.trim(i.attr("data-img")),n.cStyle=$.trim(i.attr("data-style")),n.isFixed=!!$.trim(i.attr("data-fixed")),n.fixPos=$.trim(i.attr("data-fpos")),n.isFixed&&(l=!0),l)if(n.isFixed)if(n.fixPos>0){window.location.protocol;o.push(n)}else s.push(n);else r.push(n);else r.push(n)}),l?s.length?o=o.concat(r):s=s.concat(r):(o=o.concat(r),s=s.concat(r));var d=s.length,c=o.length,h=d>1?t(d,null,s):s[0],u=c>1?t(c,h,o):o[0],g="",f="";g=h.frameURL?"<iframe class='iframe-load-delay' scrolling='no' frameborder='0'  src='' data-url='"+h.frameURL+"'></iframe>":"<a href='"+h.linkURL+"' title='"+h.title+"'><img class='img-load-delay' src='' data-url='"+h.imgURL+"'/></a>",f=u.frameURL?"<iframe class='iframe-load-delay' scrolling='no' frameborder='0' src='' data-url='"+u.frameURL+"'></iframe>":"<a href='"+u.linkURL+"' title='"+u.title+"'><img class='img-load-delay' src='' data-url='"+u.imgURL+"'/></a>",n.find(".left .promote-bg").html(g),n.find(".right .promote-bg").html(f),h.cStyle&&n.find(".left").attr("style",h.cStyle),u.cStyle&&n.find(".right").attr("style",u.cStyle),n.show(),i.remove()}},window.AdWidget||(window.AdWidget=e)}(),function(){var e=function(){var e=function(e){this.settings={target:"",type:"",title:"火狐主页",popClass:"",popId:"",content:"",init:"",success:"",successCallback:"",cancel:"",close:""},this.settings=$.extend(this.settings,e),this.settings.content&&(this.init(),this.bindEvents())};function t(e,t){if($(".pop-mask").length)$(".pop-mask").show();else{var i="<div class='pop-mask"+(e?" pop-mask-guide":"")+"'></div>";$(document.body).append(i)}!function(){var e=$(".pop-mask");if("fixed"!=e.css("position")){var t=$(window).height(),i=Math.max(dEle.clientHeight,dEle.scrollHeight),n=Math.max(t,i);e.css({height:n})}}(),e&&$(".pop-mask").animate({opacity:.7},2e3,function(){t&&$.isFunction(t)&&t.call(null)})}function i(){var e=$("#site-custom-manage"),t=$(".pop-mask,.pop-win");t.length&&$.each(t,function(e,t){var i=$(t);!i.attr("isolate")&&i.remove()}),e.is(":visible")&&e.hide()}return e.prototype={bindEvents:function(){var e=this,t=e.settings;$(".pop-win-close,.pop-win-bg").on("click",function(n){n.stopPropagation(),t.close&&$.isFunction(t.close)?t.close.call(e):i(),n.preventDefault()}),$(".btn-confirm").on("click",function(n){n.stopPropagation(),t.success&&$.isFunction(t.success)?t.success.call(e,this,t.target,t.successCallback):i()}),$(".btn-cancel").on("click",function(n){n.stopPropagation(),t.cancel&&$.isFunction(t.cancel)?t.cancel.call(e):i()})},init:function(){var e=this.settings;if(e.content){i();var n,a,s,o,r,l,d,c,h,u,g;a="  <div id='pop-title' class='pop-win-title'>      <span>"+e.title+"</span><a id='pop-close' href='javascript:;' class='pop-win-close'>×</a>  </div>  <div class='pop-win-cont'>"+e.content+"<div id='msg' class='pop-msg'></div><div class='pop-tip'></div></div>",n="<div isolate='' "+(e.popId?"id="+e.popId:"")+" class='pop-win"+(e.popClass?" "+e.popClass:"")+"'>"+a+"</div>",$(document.body).append(n+""),e.init&&$.isFunction(e.init)&&e.init.call(null),s=$(".pop-win[isolate='']").eq(0),o=s.css("position"),r=s.height(),l=s.width(),d=document.documentElement,c=document.body,h=$(window).height(),u=d.scrollTop||c.scrollTop,g="fixed"==o?-r/2:u+(h-r)/2,t(),s.css({"margin-top":g+"px","margin-left":-l/2+"px"})}}},e.clearPopWin=function(e){i()},e.showPopWin=function(t){new e(t)},e.showPopMask=function(e,i){t(e,i)},e.hidePopMask=function(){$(".pop-mask").hide()},e.showLogin=function(e){window.user_login||(window.user_login=function(t){var n=$("#user-area-info");t&&t.nickname?(n.html("<p class='user-login-status'><span>"+t.nickname+"</span><a  trace-key='head_logout' href='javascript:;' class='btn-pop-win' data-type='logout'>退出</a></p>"),i(),t.expire?CookieWidget.setItem("n_user_data",{uname:t.nickname},1e3*t.expire):CookieWidget.setItem("n_user_data",""),$(document).trigger("login"),e&&$.isFunction(e)&&e.call(null)):alert(t&&t.error?t.error:MOZ_INFO.SYSTEM_IS_BUSY)});var t="https://account.firefoxchina.cn?returnUrl="+encodeURI(window.location.protocol+"//"+window.location.host+"/do?login"),n=$(window).width(),a=$(window).height(),s=(n-550)/2>0?(n-550)/2:0,o=(a-620)/2>0?(a-620)/2:0,r="width=550,height=620,left="+s+"px,top="+o+",toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no";window.open(t,"Firefox Login",r)},e.logout=function(){confirm("你真的要退出登录吗？")&&$.ajax({url:"/do",type:"POST",data:{logout:"logout"},timeout:MOZ_INFO.TIME_OUT,error:function(){alert(MOZ_INFO.SYSTEM_IS_BUSY)},success:function(){$("#user-area-info").html("<p><a href='javascript:;' class='btn-pop-win' trace-key='head_login' data-type='login'>登录</a></p>"),CookieWidget.setItem("n_user_data",""),$(document).trigger("logout")}})},e}();window.PopWidget||(window.PopWidget=e)}(),function(){var e=function(e){for(var t in this.settings={wrapper:"",mostWrap:"",lastWrap:"",hideEle:""},e)null!=this.settings[t]&&(this.settings[t]=e[t]);this.init()};e.prototype={mostLinks:[],lastLinks:[],bindEvents:function(){var e=this;e.settings.hideEle;$(document).on("click",".record-mod li b",function(t){t.stopPropagation();var i=$(this),n="list-record-most"==i.parents(".mod-cont").eq(0).attr("id")?"most":"last";e.deleteRecord(i,n)})},init:function(){var e=this.settings,t=e.mostWrap,i=e.lastWrap,n=e.wrapper,a=window.cehomepage,s=MozillaTool.isBrowser("Firefox"),o=window.cehp_xpi?window.cehp_xpi:"http://download.firefox.com.cn/chinaedition/addons/cehomepage/cehomepage-latest.xpi",r="<p class='record-firefox-hint'>要使用此功能，请安装<a href='"+(s?o:"http://firefox.com.cn")+"'>"+(s?"火狐主页扩展":"火狐浏览器")+"</a>";NEW_EXTENSION||a?(t.length&&this.showMVisitLogs(t),i.length&&this.showLVisitLogs(i)):n.html(r),this.bindEvents()},deleteRecord:function(e,t){var i="";if(deleteKey="",t=t||"most",ceHome=window.cehomepage,btnParent=e.parent(),link=btnParent.find("a"),url=link.attr("href"),title=link.attr("title")||link.text(),traceKey="","most"==t||"last"==t){switch(t){case"most":traceKey="head_history_most_del",NEW_EXTENSION?(i=2,deleteKey="frequent.remove"):(ceHome.frequent.remove(url),btnParent.remove());break;case"last":traceKey="head_histroy_latest_del",NEW_EXTENSION?(i=4,deleteKey="last.remove"):(ceHome.last.remove(url),btnParent.remove())}if(btnParent.remove(),NEW_EXTENSION){var n={id:window.mozCNChannel,message:{id:i,key:deleteKey,parameters:{url:url}}},a=new window.CustomEvent("WebChannelMessageToChrome",NEW_EXTENSION_50?{detail:JSON.stringify(n)}:{detail:n});window.dispatchEvent(a)}traceKey&&TraceWidget.addTrace(title,url,traceKey)}},showMVisitLogs:function(t){var i=window.cehomepage,n=[];if(NEW_EXTENSION){var a={id:window.mozCNChannel,message:{id:1,key:"frequent.query",parameters:{limit:10}}},s=new window.CustomEvent("WebChannelMessageToChrome",NEW_EXTENSION_50?{detail:JSON.stringify(a)}:{detail:a});window.dispatchEvent(s)}else if(i){var o=i.frequent;o&&o.queryAsync?o.queryAsync(8,function(i){e.showRecord(t,n=i)}):(n=o.query(8),e.showRecord(t,n))}},showLVisitLogs:function(t){var i=window.cehomepage,n=[];if(NEW_EXTENSION){var a={id:window.mozCNChannel,message:{id:3,key:"last.query",parameters:{limit:10}}},s=new window.CustomEvent("WebChannelMessageToChrome",NEW_EXTENSION_50?{detail:JSON.stringify(a)}:{detail:a});window.dispatchEvent(s)}else if(i){var o=i.last;o&&o.queryAsync?o.queryAsync(8,function(i){e.showRecord(t,n=i,"last",!1,"title","url","data-idx")}):(n=i.last.query(),e.showRecord(t,n,"last",!1,"title","url","data-idx"))}}},e.build=function(t){return new e(t)},e.showRecord=function(e,t,i,n,a,s,o){if(e.length){var r=function(e,t,i,n,a,s){var o="",t=t||"most",n=n||"title",a=a||"uri",r=window.location.href;if(e){o+="<ul>";var l=0;for(var d in e){if(l>=6)break;var c=e[d],h=c[a],u=c[n],g=MozillaTool.escapeHtml(h),f=MozillaTool.escapeHtml(u),p=f||g;("last"!=t||h!=r&&!h.match(/^about:/)&&null!=u)&&(o+="<li><b data-index='"+d+"'>×</b><a href='"+g+"' title='"+p+"'>"+p+"</a></li>",l++)}o+="</ul>"}return o}(t,i,0,a,s);e.html(r)}},window.RecordWidget||(window.RecordWidget=e)}(),function(){var SITE_INNER_SPLITER="##_MSITE_##",SITE_SPLITER="##_MOZ_##",SiteWidget=function(e){this.settings={wrapper:"",manageEle:"",manageBtn:"",manageList:"",customForm:""},this.settings=$.extend(this.settings,e),this.init(),this.bindEvent()};function showSiteInfo(e,t){if(e){var i=$("#sm-hint-show");i.html(e),i.fadeIn(500,function(){t||setTimeout(function(){i.fadeOut(500)},2e3)})}}function showSiteList(wrapper,temp,list){if(wrapper.length&&temp){var htm=eval(temp).call(null,list);wrapper.html(htm)}}function siteTemp(e){var t="";if(e&&e.length){t="<ul>";$.each(e,function(e,i){var n=i.sub||i.children||i.data,a=i.style||i.field1||i.style_css;if(t+="<li ",n&&(t+="class='site-multiple",n.length>1&&(t+=" site-dropdown"),t+="'"),t+="><a href='"+i.url+"' title='"+i.title+"' ",a){var s=a;i.imgurl&&(s="position:absolute;z-index:1;background-image:url("+i.imgurl+");background-repeat:no-repeat;background-position:center center;text-indent:-9999em;"+s),t+="style='"+s+"'"}n&&n.length>1&&(t+="class='dropdown-menu'"),t+=">"+i.title+"</a>";var o="";if(n){$.each(n,function(e,t){var i=t,n=i.url,a=i.title,s=i.style||i.style_css,r=i.cName,l=i.zimg,d=i.zfrom,c=$.trim(s);i.imgurl&&(c="position:absolute;z-index:1;background-image:url("+i.imgurl+");background-repeat:no-repeat;background-position:center center;text-indent:-9999em;"+c),o+="<a class='"+r+"' href='"+n+"' title='"+a+"' "+(c?"style='"+c+"'":"")+(l?"zm-img='"+l+"'":"")+(d?"zm-from='"+d+"'":"")+"  >"+a+"</a>"}),n.length>1&&(o="<div class='site-dropmenu'>"+o+"</div>")}t+=o+"</li>"}),t+="</ul>"}else t+="<div class='no-sites'>没有常用网址，请您<a href='javascript:;' class='site-manage-opt'>添加</a></div>";return t}function siteManageTemp(e,t){var i="";return e&&e.length?$.each(e,function(e,t){var n=t.sub||t.children||t.data;if(tempStyle=t.style||t.field1||t.style_css,i+="<p data-url='"+t.url+"'",tempStyle&&(i+="data-style='"+tempStyle+"'"),n&&n.length){var a="";$.each(n,function(e,t){var i=t,n=i.url,s=i.title,o=i.style||i.style_css,r=i.cName,l=i.zfrom,d=i.zimg,c=$.trim(o);i.imgurl&&(c="position:absolute;z-index:1;background-image:url("+i.imgurl+");background-repeat:no-repeat;background-position:center center;text-indent:-9999em;"+c),a+=s+SITE_INNER_SPLITER+n+(SITE_INNER_SPLITER+c)+(SITE_INNER_SPLITER+r)+(SITE_INNER_SPLITER+d)+(SITE_INNER_SPLITER+l)+SITE_SPLITER}),a=a.slice(0,-SITE_SPLITER.length),i+="sub='"+a+"'"}i+="><span>"+t.title+"</span><i class='delete'></i></p>"}):i="<div class='no-sites'>没有常用网址，请您在下面添加</div>",i}SiteWidget.prototype={max:42,isModified:!1,defaultSites:[],customSites:[],bindEvent:function(){var e,t=this,i=t.settings,n=(i.wrapper,i.manageEle,i.customForm);$(document).on("click",".site-manage-opt",function(i){e=document.body.scrollTop||document.documentElement.scrollTop,t.showCustomManage(),i.preventDefault()}),$("#site-manage-close").click(function(i){i.stopPropagation(),t.closeCustomManage(),window.scrollTo(0,e),i.preventDefault()}),$("#site-manage-reset").click(function(e){e.stopPropagation();var i=$(this);i.hasClass("disabled")||t.getDefaultLinksNew(i),e.preventDefault()}),$("#site-manage-save").click(function(e){e.stopPropagation();var i=$(this);i.hasClass("disabled")||t.syncLinksToServer(i),e.preventDefault()}),$("#site-sync-old").length&&$("#site-sync-old").click(function(e){e.stopPropagation();var i=$(this);i.hasClass("disabled")||t.syncLinksFromOld(i),e.preventDefault()}),$("#site-manage-sync").click(function(e){e.stopPropagation();var i=$(this);i.hasClass("disabled")||t.syncLinksFromServer(i),e.preventDefault()}),n.submit(function(e){e.stopPropagation();var i=$.trim(n.find(".ipt-site").val()),a=$.trim(n.find(".ipt-name").val());return t.addLink(i,a)&&n.find(".ipt").val(""),!1}),$(document).on("click",".sm-current p .delete",function(e){e.stopPropagation();var i=$(this),n=i.parent().attr("data-url");t.deleteLink(i,n),e.preventDefault()}),$(document).on("click",".sm-recommend p",function(e){e.stopPropagation();var i=$(this),n=$.trim(i.attr("data-url")),a=$.trim(i.text());i.hasClass("item-added")?($(".link-cancel-hint").hide(),t.deleteLink(i,n)):t.addLink(n,a,i),e.preventDefault()}),$(".sm-recommend p").hover(function(e){e.stopPropagation(),$(this).hasClass("item-added")&&$(".link-cancel-hint").hide(),e.preventDefault()},function(e){e.stopPropagation(),$(".link-cancel-hint").hide(),e.preventDefault()})},init:function(){var e=this.settings,t=e.wrapper,i=e.manageBtn,n=$("#site-sync-old"),a=[];n.length&&(null==StorageWidget.getItem("mylinks")?n.remove():n.show());var s=t.find("li");$.each(s,function(e,t){var i=$(t).find("a"),n={title:"",url:""};i.length&&$.each(i,function(e,t){var i=$(t),a=$.trim(i.attr("href")),s=$.trim(i.attr("title")),o=$.trim(i.attr("style")),r=$.trim(i.attr("class")),l=$.trim(i.attr("zm-img")),d=$.trim(i.attr("zm-from"));if(e>0){!n.sub&&(n.sub=[]);var c={};c.title=s,c.url=a,o&&(c.style=o),c.cName=r,c.zimg=l,c.zfrom=d,n.sub.push(c)}else n.url=$.trim(i.attr("href")),n.title=$.trim(i.attr("title")),o&&(n.style=o)}),a.push(n)});var o=StorageWidget.getItem("n_c_sites");null==o||this.showMySiteList(o),i.show(),this.defaultSites=a,this.customSites=o},getDefaultLinks:function(e){if(confirm("恢复默认操作将会覆盖你当前的网址，确定要执行此操作吗？")){var t=this;showSiteInfo(MOZ_INFO.OPERATE_STR,!0),e.addClass("disabled"),$.ajax({url:"/do",data:{getdefaultdata2019:"getdefaultdata2019"},type:"post",dataType:"json",timeout:MOZ_INFO.TIME_OUT,error:function(){e.removeClass("disabled"),showSiteInfo(MOZ_INFO.SYSTEM_IS_BUSY)},success:function(i){e.removeClass("disabled"),i&&i.children?(TraceWidget.addLinkTrace(e),t.showManageList(i.children),t.customSites=i.children,StorageWidget.setItem("n_c_sites",""),t.dealRecommendSites(i.children),showSiteInfo("恢复成功！")):showSiteInfo(i&&i.msg?i.msg:MOZ_INFO.SYSTEM_IS_BUSY)}})}},getDefaultLinksNew:function(e){if(confirm("恢复默认操作将会覆盖你当前的网址，确定要执行此操作吗？")){var t=this;showSiteInfo(MOZ_INFO.OPERATE_STR,!0),e.addClass("disabled");$.ajax({url:"https://api2.firefoxchina.cn/home/chome_default_sites.json",type:"get",dataType:"json",timeout:MOZ_INFO.TIME_OUT,error:function(){e.removeClass("disabled"),showSiteInfo(MOZ_INFO.SYSTEM_IS_BUSY)},success:function(i){e.removeClass("disabled"),i&&i.data&&i.data.data?(TraceWidget.addLinkTrace(e),t.showManageList(i.data.data,!0),t.customSites=i.data.data,StorageWidget.setItem("n_c_sites",""),t.dealRecommendSites(i.data.data),showSiteInfo("恢复成功！")):showSiteInfo(i&&i.msg?i.msg:MOZ_INFO.SYSTEM_IS_BUSY)}})}},syncLinksFromOld:function(e){if(confirm("从旧版同步将会覆盖你当前的网址，确定要执行此操作吗？")){var t=StorageWidget.getItem("mylinks");if(t){var i=$.parseJSON(t);this.customSites=i,StorageWidget.setItem("n_c_sites",this.customSites),this.showManageList(this.customSites),TraceWidget.addLinkTrace(e),showSiteInfo("从旧版同步成功！")}}},syncLinksFromServer:function(e){var t=this;MozillaTool.checkLogin()?confirm("从服务器同步将会覆盖您当前的网址，确定要执行此操作吗？")&&(e.addClass("disabled"),showSiteInfo(MOZ_INFO.OPERATE_STR,!0),$.ajax({url:"/do",type:"post",dataType:"json",data:{getuserdata:"getuserdata"},timeout:MOZ_INFO.TIME_OUT,error:function(){e.removeClass("disabled"),showSiteInfo(MOZ_INFO.SYSTEM_IS_BUSY)},success:function(i){switch(e.removeClass("disabled"),i?i.status:0){case 1:var n=i.data,a=n.children?n.children:n;t.customSites=a,StorageWidget.setItem("n_c_sites",t.customSites),t.showManageList(a),TraceWidget.addLinkTrace(e),showSiteInfo("操作成功！");break;case-1:confirm("您还没有登录，请先登录")&&PopWidget.showLogin(function(){t.showCustomManage()});break;default:TraceWidget.addLinkTrace(e),showSiteInfo(i&&i.msg?i.msg:MOZ_INFO.SYSTEM_IS_BUSY)}}})):confirm("您还没有登录，请先登录")&&PopWidget.showLogin(function(){t.showCustomManage()})},syncLinksToServer:function(e){var t=this;if(MozillaTool.checkLogin()){if(confirm("同步到服务器将会覆盖之前保存的网址，确定要执行此操作吗？")){e.addClass("disabled"),showSiteInfo(MOZ_INFO.OPERATE_STR,!0);var i=t.getCurrentManageSites();$.ajax({url:"/do",type:"post",dataType:"json",data:{saveuserdata:"saveuserdata",data:JSON.stringify(i)},timeout:MOZ_INFO.TIME_OUT,error:function(){e.removeClass("disabled"),showSiteInfo(MOZ_INFO.SYSTEM_IS_BUSY)},success:function(i){switch(e.removeClass("disabled"),i?i.status:0){case-1:confirm("您还没有登录，请先登录")&&PopWidget.showLogin(function(){t.showCustomManage()});break;default:TraceWidget.addLinkTrace(e),showSiteInfo(i&&i.msg?i.msg:MOZ_INFO.SYSTEM_IS_BUSY)}}})}}else confirm("您还没有登录，请先登录")&&PopWidget.showLogin(function(){t.showCustomManage()})},addLink:function(e,t,i){if(!e)return showSiteInfo("缺少网站地址！"),!1;var n=(r=this).settings,a=(e=/^(\S+:\/\/)/.test(e)?e:"http://"+e,t=t||e),s=e,o="site_add_custom";if((l=n.manageList).find("p[data-url='"+e+"']").length)return showSiteInfo("该网址已存在！"),i&&i.length&&i.addClass("item-added"),!1;if(l.find("p").length>=r.max)return showSiteInfo("达到添加的上限！"),!1;var r,l;t=null!=t?t:e;(l=(n=(r=this).settings).manageList).find("p").length||l.empty();var d="",c="";if(i&&i.length){var h=$.trim(i.attr("sub"));c=$.trim(i.attr("data-style")),h&&(d=h)}return l.append("<p "+(c?"data-style='"+c+"'":"")+" data-url='"+e+"'"+(d?"sub='"+d+"'":"")+"><span>"+t+"</span><i class='delete'></i></p>"),r.resetCustomSites(),i&&i.length&&(o="site_add_system",i.addClass("item-added")),TraceWidget.addTrace(a,s,o),!0},deleteLink:function(e,t){var i=$(e),n=this.settings.manageList;t?($(".sm-recommend .rec-cont").find("p[data-url='"+t+"']").removeClass("item-added"),n.find("p[data-url='"+t+"']").remove()):i.parent().remove();n.find("p").length||n.html("<div class='no-sites'>没有常用网址，请您在下面添加</div>"),this.resetCustomSites(),this.dealRecommendSites()},getCurrentManageSites:function(){var e=this.settings,t=(e.wrapper,e.manageEle,e.manageList.find("p")),i=[];return t.length&&$.each(t,function(e,t){var n=$(t),a=n.attr("data-url"),s=n.attr("data-style"),o=n.find("span").text(),r=$.trim(n.attr("sub")),l={index:"",url:"",title:""};if(l.url=a,l.title=o,s&&(l.style=s),r){var d=r.split(SITE_SPLITER);$.each(d,function(e,t){var i=t.split(SITE_INNER_SPLITER);!l.sub&&(l.sub=[]);var n={};n.title=i[0],n.url=i[1],n.style=i[2],n.cName=i[3],n.zimg=i[4],n.zfrom=i[5],l.sub.push(n)})}i.push(l)}),i},showCustomManage:function(){var e=this.settings,t=e.wrapper,i=e.manageEle,n=e.customForm;PopWidget.showPopMask(),n.find(".ipt").val(""),this.showManageList(this.customSites||this.defaultSites),i.show();var a=t.get(0).getBoundingClientRect().top,s=document.documentElement.scrollTop||document.body.scrollTop,o=$(window).height(),r=i.height(),l=o-r>0?(o-r)/2:20;window.scrollTo(0,Math.abs(a+s)-l)},closeCustomManage:function(){var e=this.settings,t=(e.wrapper,e.manageEle);e.manageList.find("p");this.showMySiteList(this.customSites||this.defaultSites),t.hide(),PopWidget.hidePopMask()},showManageList:function(e){var t=this,i=t.settings.manageList;showSiteList(i,"siteManageTemp",e),t.dealRecommendSites(e),i.sortable({items:"p",placeholder:"sm-site-placeholder",stop:function(){t.resetCustomSites()}}),i.disableSelection()},resetCustomSites:function(){this.settings.manageList;var e=this.getCurrentManageSites();this.customSites=e,StorageWidget.setItem("n_c_sites",this.customSites)},dealRecommendSites:function(e){var t=$(".sm-recommend .rec-cont"),i=e&&e.length?e:this.customSites||this.defaultSites;t.find(".item-added").removeClass("item-added"),$.each(i,function(e,i){var n=$.trim(i.url),a=t.find("p[data-url='"+n+"']");a&&a.length&&a.addClass("item-added")})},showMySiteList:function(e){showSiteList(this.settings.wrapper,"siteTemp",e)}},SiteWidget.build=function(e){new SiteWidget(e)},window.SiteWidget||(window.SiteWidget=SiteWidget)}(),function(){var e="/res/top_website.json?v=20160809v1",t=function(){this.init()};function i(e,t){var i=!1,n=0;if(t&&e&&e.length)for(;n<e.length;n++){var a=e[n];for(var s in a)for(var o in t)if(o==s){i=!0;break}}return i}t.prototype={inited:!1,showSize:9,insertIndex:7,insertFixedIndex:2,dataAll:null,dataAvail:null,dataIndexAvail:{},arrAll:[],arrFixed:[],arrOdd:[],arrAvail:[],arrRec:[],init:function(){var t=this;window.mozCNChannel&&$.getJSON(e,function(e){if(e&&null!=e.title&&null!=e.domain){t.dataAll=e;var i=0,n=0,a=t.dataAll.title||[],s=t.dataAll.domain||[],o=t.dataAll.recommend||[];if(t.arrFixed=t.dataAll.fixed||[],t.insertIndex=t.insertIndex-t.arrFixed.length,o&&o.length&&(t.arrRec=function(e){var t=null;if(e&&e.length){var i=0;for(t=[];i<e.length;i++){var n=e[i],a={};a[n.title]={title:n.title,url:n.url},t.push(a)}}return t}(o)),a.length&&s.length){for(;i<a.length;i++){var r=a[i],l=s[i],d={},c=!1;if(d[r]={title:r,url:"http://www."+l+"?from=home.firefoxchina.cn"},o.length)for(;n<o.length;n++){if(o[n].title==r){c=!0;break}}!c&&t.arrAll.push(d)}var h={id:window.mozCNChannel,message:{id:6,key:"frequent.tophosts",parameters:{hosts:s}}},u=new window.CustomEvent("WebChannelMessageToChrome",NEW_EXTENSION_50?{detail:JSON.stringify(h)}:{detail:h});window.dispatchEvent(u),window.addEventListener("WebChannelMessageToContent",function(e){var i=e.detail.message;if(i){var n=i.key,a=i.data;switch(n){case"frequent.tophosts":t.dataAvail=a||[],t.show(),t.inited=!0,$(document).on("click","#cainixihuan",function(e){t.show()})}}})}}else console.log("top_site 数据缺失")})},show:function(){if(this.inited)this.arrAvail.splice(0,this.showSize);else if(this.arrOdd=$.extend([],this.arrAll),this.dataAvail.length)for(var e=0;e<this.dataAvail.length;e++){var t=this.dataAvail[e],i=this.arrAll[t];this.arrAvail.push(i),this.arrOdd.splice(t,1)}var n=[];if((n=this.arrAvail.length<this.showSize?this.dealPage(this.arrAvail):this.arrAvail.slice(0,this.showSize))&&n.length){var a=this.insertSites(n),s=[],o={};$.each(this.arrFixed,function(e,t){var i=null;for(var n in t){var a=t[n];a.insert_index&&(i=a.insert_index)}i?o[i]=t:s.push(t)});var r=s.concat(a);for(var l in o){var d=parseInt(l),c=o[l];try{c&&r.splice(d,0,c)}catch(e){}}var h=this.toHtml(r);h&&($("#module-slinks").find("#topsitebar").remove(),$("#module-slinks").css("marginBottom","36px").append('<div id="topsitebar" class="top-site" trace-key="site_promote"><span title="点击换一换" id="cainixihuan">猜你喜欢</span>'+h+"</div>"),$(".side-recshare").addClass("async-site"))}},dealPage:function(e){for(var t=$.extend([],e),n=[];t.length<this.showSize;){var a=Math.floor(Math.random()*this.arrOdd.length),s=this.arrOdd[a];this.arrOdd.length?s&&!i(n,s)&&(this.arrOdd.length<this.showSize&&n.push(s),t.push(s),this.arrOdd.splice(a,1)):this.arrOdd=$.extend([],this.arrAll)}return t},insertSites:function(e){var t=$.extend([],e),i=0;if(t&&t.length)for(;i<this.arrRec.length;i++){var n=Math.floor(Math.random()*this.insertIndex);t[n]&&t.splice(n,0,this.arrRec[i])}return t},toHtml:function(e){var t="",i=0,n=$.extend([],e);if(n&&n.length)for(;i<n.length;i++){var a=n[i];if(a){if(!a.hasOwnProperty("@moz@"))for(var s in a)t=t+"<a href='"+a[s].url+"' title='"+s+"' "+(a[s].cus_style?"style='"+a[s].cus_style+"'":"")+">"+s+"</a>"}else null==a&&e.splice(j,1)}return t}},t.build=function(){new t},window.NarrowWidget||(window.NarrowWidget=t)}(),function(){var e=function(e){this.settings={relatedEle:"",wrapper:"",targetEle:"",formEle:"",emailEle:"",pwdEle:"",hiddenEle:"",domainListEle:""},this.settings=$.extend(this.settings,e),this.bindEvents(),this.init()};e.prototype={mailNormalList:{},mailPopList:{"@163.com":{url:"http://mail.163.com/"},"@126.com":{url:"http://www.126.com/"},"@sohu.com":{url:"http://mail.sohu.com/"},"@yeah.net":{url:"http://www.yeah.net/"},"@21cn.com":{url:"http://mail.21cn.com/"},"@139.com":{url:"http://mail.10086.cn/"},"@qq.com":{url:"http://mail.qq.com"},"@sina.com.cn":{url:"http://mail.sina.com.cn/"},"@gmail.com":{url:"http://www.gmail.com"},"@hotmail.com":{url:"http://www.hotmail.com"},"淘宝登录":{url:"https://login.taobao.com/member/login.jhtml"},"支付宝登录":{url:"https://auth.alipay.com/login/index.htm"},"新浪微博":{url:"http://weibo.com/?c=spr_web_sq_firefox_weibo_t001",recommend:!0},"百度登录":{url:"https://passport.baidu.com/?login"},"天涯社区":{url:"http://www.tianya.cn/"}},bindEvents:function(){var e=this,t=e.settings,i=t.targetEle,n=t.pwdEle,a=t.formEle;a.on("submit",function(t){return e.beforeSubmit()}),a.find(".ipt").focus(function(e){$(this).parent().find("label").hide()}).blur(function(e){var t=$(this),i=t.val(),n=t.parent();""==i&&n.find("label").show()}),i.on("click",function(t){t.stopPropagation(),e.buildMailList()}),$(document).on("click",".email-domain-options li",function(t){t.stopPropagation();var i=$(this).parent();e.clearInput(n),i.hasClass("domain-inner")?e.chooseEmail(this):(e.settings.domainListEle&&e.settings.domainListEle.hide(),e.settings.relatedEle&&e.settings.relatedEle.hide())})},init:function(){var e=this.settings;e.wrapper,e.targetEle,this.mailNormalList;this.buildMailList()},buildMailList:function(){var e=this.settings.domainListEle,t=(this.mailNormalList,this.mailPopList),i="";if(e.find("ul").length)e.is(":visible")?e.hide():e.show();else{if(t)for(var n in i+="<ul>",t){var a=t[n];i+="<li><a  href='"+a.url+"'"+(a.recommend?"class='recommend'":"")+">"+n+"</a></li>"}i+="</ul>",e.html(i),e.css({top:"0px"})}},chooseEmail:function(e){this.mailNormalList;var t=$(e),i=this.settings,n=i.targetEle,a=(t.attr("data-type"),$.trim(t.html()));i.domainListEle&&i.domainListEle.hide(),n.find("span").html(a),StorageWidget.setItem("n_2014_email",a)},beforeSubmit:function(){var e=this.settings,t=e.emailEle,i=e.pwdEle,n=$.trim(t.val()),a=$.trim(i.val());if(!n)return alert("请填写邮箱地址"),!1;if(/[^a-zA-Z0-9_\-\.]/.test(n))return alert("请填写正确的邮箱"),!1;if(!a)return alert("请填写密码"),!1;var s=e.targetEle,o=e.hiddenEle,r=e.formEle,l=s.find("span").eq(0),d=this.mailNormalList,c=$.trim(l.html()),h=d[c],u=h.pwdName,g=h.emailName,f=h.hiddens,p=!0;if(o.empty(),r.attr({action:h.url,"trace-url":h.url,"trace-title":c}),this.clearInput(i),f){var m=f[g],v=f[u],w=h.emailSuffix||"";null!=m&&(f[g]=n+w),null!=v&&(f[u]=a),this.addHiddenParam(f)}return""==r.attr("action")&&(p=!1),p},addHiddenParam:function(e,t){var i=this.settings.hiddenEle;if(null!=t)i.append("<input type='hidden' name='"+e+"' value='"+t+"'>");else if(e instanceof Object)for(var n in e)i.append("<input type='hidden' name='"+n+"' value='"+e[n]+"'>")},clearInput:function(e){if(e.length){var t=e.parent();e.val(""),t.length&&t.find("label").show()}}},e.build=function(t){new e(t)},window.MailWidget||(window.MailWidget=e)}(),function(){var e=function(e){this.settings={container:"",scroller:"",prevEle:"",nextEle:"",pageDotEle:"",success:"",auto:!1,timeInterval:1e4,loop:!1},this.settings=$.extend(this.settings,e),this.settings.scroller.length&&(this.init(),this.bindEvents())};e.prototype={visWidth:0,contWidth:0,cPage:0,tPage:0,autoInterval:null,autoFlag:!1,bindEvents:function(){var e=this,t=e.settings,i=(t.scroller,t.prevEle),n=t.nextEle,a=t.pageDotEle,s=e.tPage;if(i.length&&i.on("click",function(i){i.stopPropagation();var n=$(this),a=e.cPage;e.switchBtnStatus(n)&&(e.switchBtnStatus(n,-1),t.loop?nPage=a-1<0?s-1:a-1:nPage=a-1<0?0:a-1,e.moveToPage(nPage,n),i.preventDefault())}),n.length&&n.on("click",function(i){i.stopPropagation();var n=$(this),a=e.cPage;e.switchBtnStatus(n)&&(e.switchBtnStatus(n,-1),t.loop?nPage=a+1>s-1?0:a+1:nPage=a+1>s-1?s-1:a+1,e.moveToPage(nPage,n),i.preventDefault())}),a.length){a.show();var o=a.find("span");o.length&&o.on("click",function(i){i.stopPropagation();var n=$(this),a=n.index();e.switchBtnStatus(n)&&(e.switchBtnStatus(n,-1),n.hasClass("on")||e.moveToPage(t.loop?a+1:a))})}},switchBtnStatus:function(e,t){if((e=$(e)).length){if(!t)return!e.attr("opt-status");switch(t){case 1:e.removeAttr("opt-status");break;case-1:e.attr("opt-status","disabled")}}},init:function(){var e=this,t=e.settings,i=t.container,n=t.scroller,a=t.prevEle,s=t.nextEle;t.pageDotEle;if(e.tPage=n.children().length,t.loop?(a.removeClass("disabled"),s.removeClass("disabled")):(a.addClass("disabled"),e.tPage<=1&&s.addClass("disabled")),i.css({position:"relative"}),n.css({position:"absolute"}),t.loop){var o=n.children().first().clone(),r=n.children().last().clone();n.append(o),n.prepend(r),e.tPage=n.children().length,e.resetDimension(),e.cPage=1,e.translate({x:-e.visWidth,y:0,z:0},!1)}else e.resetDimension();t.auto&&(e.autoFlag=!0,e.autoInterval=setInterval(function(){e.autoFlag?s.trigger("click"):clearInterval(e.autoInterval)},t.timeInterval))},moveToPage:function(e,t){var i=this,n=i.settings,a=n.scroller;n.pageDotEle;i.cPage=e,i.dealPageBtn(),i.dealPageDot(),i.resetDimension(),MozillaTool.loadDelayResource(a.children().eq(i.cPage)),i.translate({x:-e*i.visWidth,y:0,z:0},!0,function(){n.loop&&i.dealLoopEdge();var e=i.getRealPage();MozillaTool.loadDelayResource(a.children().eq(i.cPage)),t&&i.switchBtnStatus(t,1),n.success&&$.isFunction(n.success)&&n.success.call(null,e,i.tPage)})},translate:function(e,t,i){var n=this.settings.scroller;n.length&&(t?n.animate({left:e.x+"px"},500,function(){i&&$.isFunction(i)&&i.call(null)}):n.css({left:e.x+"px"}))},dealLoopEdge:function(){var e=this.tPage,t=this.cPage;t<=0&&(this.cPage=e-2,this.translate({x:-this.cPage*this.visWidth,y:0,z:0},!1)),t>=e-1&&(this.cPage=1,this.translate({x:-this.cPage*this.visWidth,y:0,z:0},!1))},dealPageDot:function(){this.cPage,this.tPage;var e=this.settings.pageDotEle;if(e.length){var t=this.getRealPage();e.find("span").eq(t).addClass("on").siblings().removeClass("on")}},getRealPage:function(){var e=this.settings,t=this.cPage,i=this.tPage,n=t;return e.loop&&(n=0==t?i-3:t==i-1?0:t-1),n},dealPageBtn:function(){var e=this.settings;if(!e.loop){var t=e.nextEle,i=e.prevEle,n=this.tPage,a=this.cPage;n>1?(i.removeClass("disabled"),t.removeClass("disabled")):(i.addClass("disabled"),t.addClass("disabled")),a<=0?i.addClass("disabled"):a>=n-1?t.addClass("disabled"):(t.removeClass("disabled"),i.removeClass("disabled"))}},resetDimension:function(){var e=this.settings,t=e.container,i=e.scroller;this.visWidth=t.width(),this.contWidth=this.tPage*this.visWidth,i.css({width:this.contWidth})}},e.build=function(t){new e(t)},window.SlideWidget||(window.SlideWidget=e)}();